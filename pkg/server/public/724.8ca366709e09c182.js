"use strict";(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[724],{5724:(Pn,K,c)=>{c.r(K),c.d(K,{CreateModule:()=>yn});var H=c(7833),W=c(9671),j=c(3479),Z=c(5358),k=c(8584),v=c(7952),e=c(5879),O=c(9862),X=c(6451),d=c(8189),I=c(8109);let y=(()=>{class n{constructor(t,r,o,a,s,u){this.http_=t,this.namespace_=r,this.csrfToken_=o,this.matDialog_=a,this.router_=s,this.CONFIG=u,this.isDeployInProgress_=!1}createContent(t,r=!0,o=""){var a=this;return(0,W.Z)(function*(){const s={name:o,namespace:a.namespace_.current(),content:t,validate:r};let u,g;try{const{token:m}=yield a.csrfToken_.getTokenForAction("appdeploymentfromfile").toPromise();a.isDeployInProgress_=!0,u=yield a.http_.post("api/v1/appdeploymentfromfile",s,{headers:{[a.CONFIG.csrfHeaderName]:m}}).toPromise(),u.error.length>0&&a.reportError_("Deployment has been partly completed",u.error)}catch(m){g=m}if(a.isDeployInProgress_=!1,g)throw a.reportError_("Deploying file has failed",(0,j.Vf)(g).message),g;return u})()}deploy(t){var r=this;return(0,W.Z)(function*(){let o,a;try{const{token:s}=yield r.csrfToken_.getTokenForAction("appdeployment").toPromise();r.isDeployInProgress_=!0,o=yield r.http_.post("api/v1/appdeployment",t,{headers:{[r.CONFIG.csrfHeaderName]:s}}).toPromise()}catch(s){a=s}if(r.isDeployInProgress_=!1,a)throw r.reportError_("Deploying file has failed",(0,j.Vf)(a).message),a;return o})()}isDeployDisabled(){return this.isDeployInProgress_}reportError_(t,r){this.matDialog_.open(k.h,{data:{title:t,message:r,confirmLabel:"OK"}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.LFG(O.eN),e.LFG(v.L),e.LFG(X.Q),e.LFG(d.uw),e.LFG(I.F0),e.LFG(Z.ED))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})(),tt=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[y]})}return n})();var F=c(1075);let nt=(()=>{class n{constructor(t){this.data=t}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(d.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-confirm-dialog"]],decls:9,vars:4,consts:[["mat-dialog-title",""],[1,"kd-dialog-text"],["mat-button","","color","secondary",3,"mat-dialog-close"],["mat-button","","color","primary",3,"mat-dialog-close"]],template:function(r,o){1&r&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content",1),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",2),e._uU(6," No "),e.qZA(),e.TgZ(7,"button",3),e._uU(8," Yes "),e.qZA()()),2&r&&(e.xp6(1),e.Oqu(o.data.title),e.xp6(2),e.Oqu(o.data.message),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[F.lW,d.ZT,d.uh,d.xY,d.H8],encapsulation:2})}return n})();var P=c(2096);let ee=(()=>{class n{constructor(t){this.dialog_=t}canDeactivate(t){return t.canDeactivate()?(0,P.of)(!0):this.dialog_.open(nt,{data:{title:"Unsaved changes",message:"The form has not been submitted yet, do you really want to leave?"}}).afterClosed()}static#e=this.\u0275fac=function(r){return new(r||n)(e.LFG(d.uw))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac})}return n})();var te=c(5816),R=c(6814);let ot=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[R.ez,te.m,H.K]})}return n})();var rt=c(960);let b=(()=>{class n{unloadNotification(t){this.canDeactivate()||(t.returnValue=!0)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=e.lG2({type:n,hostBindings:function(r,o){1&r&&e.NdJ("beforeunload",function(s){return o.unloadNotification(s)},!1,e.Jf7)}})}return n})();var i=c(6223),w=c(5529),Y=c(1887),at=c(1383);function it(n,_){1&n&&(e.TgZ(0,"span"),e.SDv(1,10),e.qZA())}function _t(n,_){1&n&&(e.TgZ(0,"span"),e.SDv(1,11),e.qZA())}let ne=(()=>{class n extends b{constructor(t,r,o,a){super(),this.namespace_=t,this.create_=r,this.history_=o,this.router_=a,this.created_=!1}isCreateDisabled(){return!this.file||0===this.file.content.length}create(){this.create_.createContent(this.file.content,!0,this.file.name).then(()=>{this.created_=!0,this.router_.navigate(["overview"],{queryParams:{[w.xt]:this.namespace_.current()}})})}onFileLoad(t){this.file=t}cancel(){this.history_.goToPreviousState("overview")}areMultipleNamespacesSelected(){return this.namespace_.areMultipleNamespacesSelected()}canDeactivate(){return this.isCreateDisabled()||this.created_}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(v.L),e.Y36(y),e.Y36(Y.q),e.Y36(I.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-create-from-file"]],viewQuery:function(r,o){if(1&r&&e.Gf(i.F,7),2&r){let a;e.iGM(a=e.CRH())&&(o.ngForm=a.first)}},features:[e.qOj],decls:11,vars:3,consts:function(){let t,r,o,a,s,u;return t=" Learn more " + "\ufffd#5\ufffd" + "open_in_new" + "\ufffd/#5\ufffd" + "",r="Choose YAML or JSON file",o=" Upload\n",a=" Cancel\n",s=" Select YAML or JSON file specifying the resources to deploy to the namespace specified in the file. ",u=" Select YAML or JSON file specifying the resources to deploy to the currently selected namespace. ",[[1,"kd-create-from-file-info"],[4,"ngIf"],["href","https://kubernetes.io/docs/tasks/run-application/run-stateless-application-deployment/","target","_blank"],t,[1,"material-icons"],["label",r,3,"fileLoad"],["type","button","color","primary","mat-raised-button","",3,"disabled","click"],o,["type","button","color","primary","mat-button","",3,"click"],a,s,u]},template:function(r,o){1&r&&(e.TgZ(0,"div",0),e.YNc(1,it,2,0,"span",1),e.YNc(2,_t,2,0,"span",1),e.TgZ(3,"a",2),e.tHW(4,3),e._UZ(5,"i",4),e.N_p(),e.qZA()(),e.TgZ(6,"kd-upload-file",5),e.NdJ("fileLoad",function(s){return o.onFileLoad(s)}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return o.create()}),e.SDv(8,7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.cancel()}),e.SDv(10,9),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",o.areMultipleNamespacesSelected()),e.xp6(1),e.Q6J("ngIf",!o.areMultipleNamespacesSelected()),e.xp6(5),e.Q6J("disabled",o.isCreateDisabled()))},dependencies:[R.O5,F.lW,at.R],styles:[".kd-create-from-file-info[_ngcontent-%COMP%]{margin-bottom:24px;padding:0 4px}.kd-create-from-file-info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:14px}.kd-deploy-from-file-button[_ngcontent-%COMP%]{margin-left:0}"]})}return n})();var oe=c(9455),L=c(510),re=c(1993),ae=c(146);const st=["group"];let lt=(()=>{class n{constructor(t,r){this.dialogRef=t,this.data=r,this.text="",this.selectedMode=L.j.YAML,this.modes=L.j,this.destroyRef=(0,e.f3M)(e.ktI)}ngOnInit(){const t=this.toDeploymentConfiguration(this.data.spec);this.text=JSON.stringify(this.removeEmptyField(t)),this.buttonToggleGroup.valueChange.pipe((0,re.sL)(this.destroyRef)).subscribe(r=>{this.selectedMode=r,this.text&&this.updateText()})}getSelectedMode(){return this.buttonToggleGroup.value}updateText(){this.text=this.selectedMode===L.j.YAML?(0,oe.$w)(JSON.parse(this.text)):this.toRawJSON((0,oe.zD)(this.text))}removeEmptyField(t){return JSON.parse(JSON.stringify(t),(r,o)=>{if(!(null==o||"object"==typeof o&&0===Object.entries(o).length||Array.isArray(o)&&(0===o.length||o.every(a=>null===a))))return o})}toDeploymentConfiguration(t){const r=Object.fromEntries(t.labels.map(o=>[o.key,o.value]));return{apiVersion:"apps/v1",kind:"Deployment",metadata:{name:t.name,namespace:t.namespace,labels:r},annotations:{description:t.description},spec:{replicas:t.replicas,selector:{matchLabels:r},template:{metadata:{name:t.name,labels:r},annotations:{description:t.description},spec:{containers:[{name:t.name,image:t.containerImage,command:[t.containerCommand],args:[t.containerCommandArgs],env:t.variables,resources:{requests:{cpu:t.cpuRequirement,memory:t.memoryRequirement}},securityContext:{privileged:t.runAsPrivileged}}],imagePullSecrets:[{name:t.imagePullSecret}]}}}}}toRawJSON(t){return JSON.stringify(t,null,"\t")}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(d.so),e.Y36(d.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-preview-deploy-dialog"]],viewQuery:function(r,o){if(1&r&&e.Gf(st,7),2&r){let a;e.iGM(a=e.CRH())&&(o.buttonToggleGroup=a.first)}},decls:13,vars:7,consts:function(){let t,r;return t=" Preview Deployment\n",r=" Close ",[["mat-dialog-title",""],t,[1,"kd-dialog-text"],["group","matButtonToggleGroup"],[3,"value","checked"],[3,"value"],[3,"text","readOnly","mode","textChange"],["mat-button","","color","primary",3,"mat-dialog-close"],r]},template:function(r,o){1&r&&(e.TgZ(0,"h2",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content",2)(3,"mat-button-toggle-group",null,3)(5,"mat-button-toggle",4),e._uU(6,"YAML"),e.qZA(),e.TgZ(7,"mat-button-toggle",5),e._uU(8,"JSON"),e.qZA()(),e.TgZ(9,"kd-text-input",6),e.NdJ("textChange",function(s){return o.text=s}),e.qZA()(),e.TgZ(10,"mat-dialog-actions")(11,"button",7),e.SDv(12,8),e.qZA()()),2&r&&(e.xp6(5),e.Q6J("value",o.modes.YAML)("checked",!0),e.xp6(2),e.Q6J("value",o.modes.JSON),e.xp6(2),e.Q6J("text",o.text)("readOnly",!0)("mode",o.getSelectedMode()),e.xp6(2),e.Q6J("mat-dialog-close",!1))},dependencies:[F.lW,d.ZT,d.uh,d.xY,d.H8,ae.A9,ae.Yi,L.t],encapsulation:2})}return n})();var D=c(8180),ie=c(4664),M=c(6005),$=c(5565),S=c(3814);const ct=["*"];let J=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-help-section"]],ngContentSelectors:ct,decls:2,vars:0,consts:[["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column",1,"kd-help-section"]],template:function(r,o){1&r&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA())},dependencies:[S.xw],styles:[".kd-help-section[_ngcontent-%COMP%]    >*{flex:1;flex-basis:auto;margin:8px 0;width:100%}.kd-help-section[_ngcontent-%COMP%]    >*:last-child{padding-left:32px}.kd-help-section[_ngcontent-%COMP%]    >*:first-child{max-width:48.5%}@media (width <= 959px){.kd-help-section[_ngcontent-%COMP%]    >*:first-child{max-width:100%}}.kd-help-section[_ngcontent-%COMP%]   kd-port-mappings[_ngcontent-%COMP%]{margin-bottom:0;margin-top:0}"]})}return n})();const ut=["*"];let z=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-user-help"]],ngContentSelectors:ut,decls:2,vars:0,consts:[[1,"kd-user-help"]],template:function(r,o){1&r&&(e.F$t(),e.TgZ(0,"div",0),e.Hsn(1),e.qZA())},styles:[".kd-user-help[_ngcontent-%COMP%]    {font-size:14px}.kd-user-help[_ngcontent-%COMP%]     .material-icons{font-size:12px;vertical-align:middle}"]})}return n})();function gt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,16),e.qZA())}function pt(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,17),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.pQV(t.namespaceMaxLength),e.QtT(1)}}function dt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,18),e.qZA())}let mt=(()=>{class n{constructor(t,r,o,a,s,u,g){this.dialogRef=t,this.data=r,this.http_=o,this.csrfToken_=a,this.matDialog_=s,this.fb_=u,this.appConfig_=g,this.namespaceMaxLength=63,this.namespacePattern=new RegExp("^[a-z0-9]([-a-z0-9]*[a-z0-9])?$")}ngOnInit(){this.form=this.fb_.group({namespace:["",i.kI.compose([i.kI.maxLength(this.namespaceMaxLength),i.kI.pattern(this.namespacePattern)])]})}get namespace(){return this.form.get("namespace")}createNamespace(){if(!this.form.valid)return;const t={name:this.namespace.value};this.csrfToken_.getTokenForAction("namespace").pipe((0,ie.w)(o=>this.http_.post("api/v1/namespace",{...t},{headers:(new O.WM).set(this.appConfig_.csrfHeaderName,o.token)}))).subscribe(()=>{this.dialogRef.close(this.namespace.value)},o=>{this.dialogRef.close(),this.matDialog_.open(k.h,{data:{title:"Error creating namespace",message:o.data,confirmLabel:"OK"}})})}isDisabled(){return this.data.namespaces.indexOf(this.namespace.value)>=0}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(d.so),e.Y36(d.WI),e.Y36(O.eN),e.Y36(X.Q),e.Y36(d.uw),e.Y36(i.QS),e.Y36(Z.ED))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-create-namespace-dialog"]],decls:28,vars:7,consts:function(){let t,r,o,a,s,u,g,m,C,E;return t=" Create a new namespace\n",r="The new namespace will be added to the cluster.",o="Namespace name",a="A namespace with the specified name will be added to the cluster.",s=" Learn more " + "\ufffd#21\ufffd" + "open_in_new" + "\ufffd/#21\ufffd" + "",u=" Create ",g=" Cancel ",m=" Name is required. ",C=" Name must be up to " + "\ufffd0\ufffd" + " characters long. ",E=" Name must be alphanumeric and may contain dashes. ",[["mat-dialog-title",""],t,[1,"kd-dialog-text"],r,[3,"formGroup"],["matInput","","type","text","placeholder",o,"name","namespace","formControlName","namespace","required",""],["align","end"],[4,"ngIf"],a,["href","https://kubernetes.io/docs/admin/namespaces/","target","_blank","tabindex","-1"],s,[1,"material-icons"],["mat-button","","type","submit","color","primary",3,"disabled","click"],u,["mat-button","",3,"click"],g,m,C,E]},template:function(r,o){1&r&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content",2),e.ynx(3),e.TgZ(4,"div"),e.SDv(5,3),e.qZA(),e.TgZ(6,"div")(7,"form",4)(8,"kd-help-section")(9,"mat-form-field"),e._UZ(10,"input",5),e.TgZ(11,"mat-hint",6),e._uU(12),e.qZA(),e.YNc(13,gt,2,0,"mat-error",7),e.YNc(14,pt,2,1,"mat-error",7),e.YNc(15,dt,2,0,"mat-error",7),e.qZA(),e.TgZ(16,"kd-user-help"),e.ynx(17),e.SDv(18,8),e.BQk(),e.TgZ(19,"a",9),e.tHW(20,10),e._UZ(21,"i",11),e.N_p(),e.qZA()()()()(),e.BQk(),e.qZA(),e.TgZ(22,"mat-dialog-actions",6),e.ynx(23),e.TgZ(24,"button",12),e.NdJ("click",function(){return o.createNamespace()}),e.SDv(25,13),e.qZA(),e.TgZ(26,"button",14),e.NdJ("click",function(){return o.cancel()}),e.SDv(27,15),e.qZA(),e.BQk(),e.qZA()),2&r&&(e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(5),e.AsE("",o.namespace.value.length," / ",o.namespaceMaxLength,""),e.xp6(1),e.Q6J("ngIf",null==o.namespace.errors?null:o.namespace.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.namespace.errors?null:o.namespace.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==o.namespace.errors?null:o.namespace.errors.pattern),e.xp6(9),e.Q6J("disabled",o.isDisabled()))},dependencies:[R.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,F.lW,M.TO,M.KE,M.bx,$.Nt,d.uh,d.xY,d.H8,J,z],encapsulation:2})}return n})();class _e{constructor(_="",t="",r=!0){this.editable=r,this.key=_,this.value=t}}var Q=c(3620),x=c(7398);let Tt=(()=>{class n{constructor(t){this.http=t}validate(t){return se(this.http,this.namespace)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(O.eN))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","kdUniqueName",""]],inputs:{namespace:"namespace"},features:[e._Bn([{provide:i.SD,useExisting:(0,e.Gpc)(()=>n),multi:!0}])]})}return n})();function se(n,_){return t=>t.value?n.post("api/v1/appdeployment/validate/name",{name:t.value,namespace:_}).pipe((0,Q.b)(500),(0,x.U)(r=>r.valid?null:{uniqueName:t.value})):(0,P.of)(null)}class f{static namePattern(_){return _.value?new RegExp("^[a-z]([-a-z0-9]*[a-z0-9])?$").test(_.value)?null:{namePattern:{value:_.value}}:null}static isInteger(_){const t=_.value;return t?Number(t)===t&&t%1==0||!t?null:{kdValidInteger:{value:_.value}}:null}static labelKeyNameLength(_){const t=_.value,o=t.indexOf("/");return(o>-1?t.substring(o+1):t).length<=63?null:{kdValidLabelKeyPrefixLength:{value:!0}}}static labelKeyPrefixLength(_){const t=_.value,o=t.indexOf("/");return(o>-1?t.substring(0,o):"").length<=253?null:{kdValidLabelKeyPrefixLength:{value:!0}}}static labelKeyNamePattern(_){const t=_.value,o=t.indexOf("/"),a=o>-1?t.substring(o+1):t;return/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(a)||""===t?null:{kdValidLabelKeyNamePattern:{value:!0}}}static labelKeyPrefixPattern(_){const t=_.value,o=t.indexOf("/");return o>-1&&!/^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$/.test(t.substring(0,o))?{kdValidLabelKeyPrefixPattern:{value:!0}}:null}static labelValuePattern(_){return/^(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])?$/.test(_.value)?null:{kdValidLabelValuePattern:{value:!0}}}}function Mt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,20),e.qZA())}function Ct(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.pQV(t.secretNameMaxLength),e.QtT(1)}}function Rt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,22),e.qZA())}function ft(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,23),e.qZA())}function Ot(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,24),e.qZA())}let Ft=(()=>{class n{constructor(t,r,o,a,s,u,g){this.dialogRef=t,this.data_=r,this.http_=o,this.csrfToken_=a,this.matDialog_=s,this.fb_=u,this.appConfig_=g,this.secretNameMaxLength=253,this.secretNamePattern=new RegExp("^[a-z0-9]([-a-z0-9]*[a-z0-9])?(\\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*$"),this.dataPattern=new RegExp("^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$")}ngOnInit(){this.form=this.fb_.group({secretName:["",i.kI.compose([i.kI.maxLength(this.secretNameMaxLength),i.kI.pattern(this.secretNamePattern)])],data:["",i.kI.pattern(this.dataPattern)]})}get secretName(){return this.form.get("secretName")}get data(){return this.form.get("data")}createSecret(){if(!this.form.valid)return;const t={name:this.secretName.value,namespace:this.data_.namespace,data:this.data.value};this.csrfToken_.getTokenForAction("secret").pipe((0,ie.w)(o=>this.http_.post("api/v1/secret/",{...t},{headers:(new O.WM).set(this.appConfig_.csrfHeaderName,o.token)}))).subscribe(()=>{this.dialogRef.close(this.secretName.value)},o=>{this.dialogRef.close(),this.matDialog_.open(k.h,{data:{title:"Error creating secret",message:o.data,confirmLabel:"OK"}})})}cancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(d.so),e.Y36(d.WI),e.Y36(O.eN),e.Y36(X.Q),e.Y36(d.uw),e.Y36(i.QS),e.Y36(Z.ED))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-create-secret-dialog"]],decls:39,vars:8,consts:function(){let t,r,o,a,s,u,g,m,C,E,T,N,A,h;return t=" Create a new image pull secret\n",r="The new secret will be added to the cluster",o="Secret name",a="A secret with the specified name will be added to the cluster in the namespace.",s=" Learn more " + "\ufffd#21\ufffd" + "open_in_new" + "\ufffd/#21\ufffd" + "",u="Specify the data for your secret to hold. The value is the Base64 encoded content of a .dockercfg file.",g=" Learn more " + "\ufffd#32\ufffd" + "open_in_new" + "\ufffd/#32\ufffd" + "",m=" Create ",C=" Cancel ",E=" Name is required. ",T=" Name must be up to " + "\ufffd0\ufffd" + " characters long. ",N=" Name must follow the DNS domain name syntax (e.g. new.image-pull.secret). ",A=" Data is required. ",h=" Data must be Base64 encoded. ",[["mat-dialog-title",""],t,[1,"kd-dialog-text"],r,[3,"formGroup"],["matInput","","type","text","placeholder",o,"name","secretName","formControlName","secretName","required",""],["align","end"],[4,"ngIf"],a,["href","https://kubernetes.io/docs/user-guide/secrets/","target","_blank","tabindex","-1"],s,[1,"material-icons"],["matInput","","type","text","placeholder","Image pull secret data","name","data","formControlName","data","required",""],u,["href","https://kubernetes.io/docs/user-guide/images/#specifying-imagepullsecrets-on-a-pod","target","_blank","tabindex","-1"],g,["mat-button","","type","submit","color","primary",3,"click"],m,["mat-button","",3,"click"],C,E,T,N,A,h]},template:function(r,o){1&r&&(e.TgZ(0,"h4",0),e.SDv(1,1),e.qZA(),e.TgZ(2,"mat-dialog-content",2),e.ynx(3),e.TgZ(4,"div"),e.SDv(5,3),e.qZA(),e.TgZ(6,"div")(7,"form",4)(8,"kd-help-section")(9,"mat-form-field"),e._UZ(10,"input",5),e.TgZ(11,"mat-hint",6),e._uU(12),e.qZA(),e.YNc(13,Mt,2,0,"mat-error",7),e.YNc(14,Ct,2,1,"mat-error",7),e.YNc(15,Rt,2,0,"mat-error",7),e.qZA(),e.TgZ(16,"kd-user-help")(17,"span"),e.SDv(18,8),e.qZA(),e.TgZ(19,"a",9),e.tHW(20,10),e._UZ(21,"i",11),e.N_p(),e.qZA()()(),e.TgZ(22,"kd-help-section")(23,"mat-form-field"),e._UZ(24,"input",12),e.YNc(25,ft,2,0,"mat-error",7),e.YNc(26,Ot,2,0,"mat-error",7),e.qZA(),e.TgZ(27,"kd-user-help"),e.ynx(28),e.SDv(29,13),e.BQk(),e.TgZ(30,"a",14),e.tHW(31,15),e._UZ(32,"i",11),e.N_p(),e.qZA()()()()(),e.BQk(),e.qZA(),e.TgZ(33,"mat-dialog-actions",6),e.ynx(34),e.TgZ(35,"button",16),e.NdJ("click",function(){return o.createSecret()}),e.SDv(36,17),e.qZA(),e.TgZ(37,"button",18),e.NdJ("click",function(){return o.cancel()}),e.SDv(38,19),e.qZA(),e.BQk(),e.qZA()),2&r&&(e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(5),e.AsE("",o.secretName.value.length," / ",o.secretNameMaxLength,""),e.xp6(1),e.Q6J("ngIf",null==o.secretName.errors?null:o.secretName.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.secretName.errors?null:o.secretName.errors.maxlength),e.xp6(1),e.Q6J("ngIf",null==o.secretName.errors?null:o.secretName.errors.pattern),e.xp6(10),e.Q6J("ngIf",null==o.data.errors?null:o.data.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.data.errors?null:o.data.errors.pattern))},dependencies:[R.O5,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.sg,i.u,F.lW,M.TO,M.KE,M.bx,$.Nt,d.uh,d.xY,d.H8,J,z],encapsulation:2})}return n})();var St=c(5877),le=c(3139),ce=c(6611),ue=c(6649),ge=c(7509),V=c(4692);function Nt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,14),e.qZA())}function At(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,a=e.oxw();return e.KtG(a.remove(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}function ht(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"mat-form-field",7)(2,"input",8),e.NdJ("change",function(){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.addVariableIfNeeed(a))}),e.qZA(),e.YNc(3,Nt,2,0,"mat-error",9),e.qZA(),e._UZ(4,"div",10),e.TgZ(5,"mat-form-field",7),e._UZ(6,"input",11),e.qZA(),e.TgZ(7,"div",12),e.YNc(8,At,3,0,"button",13),e.qZA()()}if(2&n){const t=_.$implicit,r=_.index,o=e.oxw();e.Q6J("formGroupName",r),e.xp6(3),e.Q6J("ngIf",null==t.get("name").errors?null:t.get("name").errors.pattern),e.xp6(5),e.Q6J("ngIf",o.isRemovable(r))}}let It=(()=>{class n{constructor(t){this.fb_=t,this.namePattern=new RegExp("^[A-Za-z_][A-Za-z0-9_]*$"),this.propagateChange=r=>{}}ngOnInit(){this.form=this.fb_.group({variables:this.fb_.array([this.newVariable()])}),this.form.valueChanges.subscribe(t=>{this.propagateChange(t)})}validate(t){return this.form.valid?null:{labelValid:{value:this.form.errors}}}get variables(){return this.form.get("variables")}addVariableIfNeeed(){const t=this.variables.at(this.variables.length-1);this.isVariableFilled(t)&&t.valid&&this.variables.push(this.newVariable())}isVariableFilled(t){return!!t.get("name").value}newVariable(){return this.fb_.group({name:["",i.kI.pattern(this.namePattern)],value:""})}isRemovable(t){return t!==this.variables.length-1}remove(t){this.variables.removeAt(t)}writeValue(){}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(i.QS))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-environment-variables"]],features:[e._Bn([{provide:i.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:i.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:6,vars:2,consts:function(){let t,r,o,a;return t=" Environment variables ",r="Name",o="Value",a=" Variable name must be a valid C identifier. ",[["fxLayout","column"],[1,"kd-margin-bottom"],t,[3,"formGroup"],["formArrayName","variables"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["fxFlex","auto"],["matInput","","name","name","formControlName","name","placeholder",r,3,"change"],[4,"ngIf"],["fxFlex","5"],["matInput","","name","value","formControlName","value","placeholder",o],["fxFlex","10"],["mat-icon-button","",3,"click",4,"ngIf"],a,["mat-icon-button","",3,"click"]]},template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e.SDv(2,2),e.qZA(),e.ynx(3,3)(4,4),e.YNc(5,ht,9,3,"div",5),e.BQk()(),e.qZA()),2&r&&(e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(2),e.Q6J("ngForOf",o.variables.controls))},dependencies:[R.sg,R.O5,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,F.lW,M.TO,M.KE,V.Hw,$.Nt,S.xw,S.yH],encapsulation:2})}return n})(),Lt=(()=>{class n{constructor(t){this.http=t}validate(t){return t.value?this.http.post("api/v1/appdeployment/validate/imagereference",{reference:t.value}).pipe((0,Q.b)(500),(0,x.U)(r=>r.valid?null:{validImageReference:r.reason})):(0,P.of)(null)}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(O.eN))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","kdValidImageReference",""]],inputs:{namespace:"namespace"},features:[e._Bn([{provide:i.SD,useExisting:(0,e.Gpc)(()=>n),multi:!0}])]})}return n})();var vt=c(7921),yt=c(2181);let bt=(()=>{class n{constructor(t){this.http=t}validate(t){return pe(this.http,this.isExternal)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(O.eN))};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","kdValidProtocol",""]],inputs:{isExternal:"isExternal"},features:[e._Bn([{provide:i.SD,useExisting:(0,e.Gpc)(()=>n),multi:!0}])]})}return n})();function pe(n,_){return t=>t.value?n.post("api/v1/appdeployment/validate/protocol",{protocol:t.value,isExternal:_}).pipe((0,D.q)(1)).pipe((0,Q.b)(500),(0,x.U)(o=>o.valid?null:{validProtocol:!0})):(0,P.of)(null)}function Dt(n,_){if(1&n&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.label," ")}}function xt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,19),e.qZA())}function Gt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,20),e.qZA())}function Zt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,21),e.qZA())}function kt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,22),e.qZA())}function Xt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,23),e.qZA())}function qt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,24),e.qZA())}function wt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,25),e.qZA())}function Yt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,26),e.qZA())}function Jt(n,_){if(1&n&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function zt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,27),e.qZA())}function Qt(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,28),e.qZA())}function Vt(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,a=e.oxw();return e.KtG(a.remove(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}const Ut=function(n){return{"kd-deploy-form-progress-show":n}};function Bt(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"mat-form-field",9)(2,"input",10),e.NdJ("change",function(){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.checkPortMapping(a))}),e.qZA(),e.YNc(3,xt,2,0,"mat-error",11),e.YNc(4,Gt,2,0,"mat-error",11),e.YNc(5,Zt,2,0,"mat-error",11),e.YNc(6,kt,2,0,"mat-error",11),e.qZA(),e._UZ(7,"p",12),e.TgZ(8,"mat-form-field",9)(9,"input",13),e.NdJ("change",function(){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.checkPortMapping(a))}),e.qZA(),e.YNc(10,Xt,2,0,"mat-error",11),e.YNc(11,qt,2,0,"mat-error",11),e.YNc(12,wt,2,0,"mat-error",11),e.YNc(13,Yt,2,0,"mat-error",11),e.qZA(),e._UZ(14,"p",12),e.TgZ(15,"mat-form-field",14)(16,"mat-select",15),e.YNc(17,Jt,2,2,"mat-option",4),e.qZA(),e._UZ(18,"mat-progress-bar",16),e.YNc(19,zt,2,0,"mat-error",11),e.YNc(20,Qt,2,0,"mat-error",11),e.qZA(),e.TgZ(21,"div",17),e.YNc(22,Vt,3,0,"button",18),e.qZA()()}if(2&n){const t=_.$implicit,r=_.index,o=e.oxw();e.Q6J("formGroupName",r),e.xp6(2),e.Q6J("required",o.isFirst(r)),e.xp6(1),e.Q6J("ngIf",null==t.get("port").errors?null:t.get("port").errors.kdValidInteger),e.xp6(1),e.Q6J("ngIf",null==t.get("port").errors?null:t.get("port").errors.required),e.xp6(1),e.Q6J("ngIf",null==t.get("port").errors?null:t.get("port").errors.min),e.xp6(1),e.Q6J("ngIf",null==t.get("port").errors?null:t.get("port").errors.max),e.xp6(3),e.Q6J("required",o.isFirst(r)),e.xp6(1),e.Q6J("ngIf",null==t.get("targetPort").errors?null:t.get("targetPort").errors.kdValidInteger),e.xp6(1),e.Q6J("ngIf",null==t.get("targetPort").errors?null:t.get("targetPort").errors.required),e.xp6(1),e.Q6J("ngIf",null==t.get("targetPort").errors?null:t.get("targetPort").errors.min),e.xp6(1),e.Q6J("ngIf",null==t.get("targetPort").errors?null:t.get("targetPort").errors.max),e.xp6(3),e.Q6J("isExternal",o.isExternal),e.xp6(1),e.Q6J("ngForOf",o.protocols),e.xp6(1),e.Q6J("ngClass",e.VKq(17,Ut,t.get("protocol").pending)),e.xp6(1),e.Q6J("ngIf",null==t.get("protocol").errors?null:t.get("protocol").errors.required),e.xp6(1),e.Q6J("ngIf",null==t.get("protocol").errors?null:t.get("protocol").errors.validProtocol),e.xp6(2),e.Q6J("ngIf",o.isRemovable(r))}}const B={label:"None",external:!1},Kt={label:"Internal",external:!1},Ht={label:"External",external:!0};let Wt=(()=>{class n{constructor(t,r){this.fb_=t,this.http_=r,this.changeExternal=new e.vpe,this.propagateChange=o=>{}}ngOnInit(){this.serviceTypes=[B,Kt,Ht],this.portMappingForm=this.fb_.group({serviceType:B,portMappings:this.fb_.array([])}),this.serviceType.valueChanges.subscribe(()=>{this.changeServiceType()}),this.portMappingForm.valueChanges.subscribe(t=>{this.propagateChange(t)})}validate(t){return this.portMappingForm.statusChanges.pipe((0,vt.O)(this.portMappingForm.status),(0,yt.h)(()=>!this.portMappingForm.pending),(0,D.q)(1),(0,x.U)(()=>this.portMappingForm.invalid?{error:!0}:null))}changeServiceType(){if(this.serviceType.value===B){const t=this.portMappings.length;for(let r=0;r<t;r++)this.portMappings.removeAt(0)}else 0===this.portMappings.length&&this.portMappings.push(this.newEmptyPortMapping(this.protocols[0]));this.isExternal=this.serviceType.value.external,this.changeExternal.emit(this.isExternal);for(let t=0;t<this.portMappings.length;t++){const r=this.portMappings.at(t).get("protocol");r.clearAsyncValidators(),r.setAsyncValidators(pe(this.http_,this.isExternal)),r.updateValueAndValidity()}}get portMappings(){return this.portMappingForm.get("portMappings")}get serviceType(){return this.portMappingForm.get("serviceType")}newEmptyPortMapping(t){return this.fb_.group({port:["",i.kI.compose([f.isInteger,i.kI.min(1),i.kI.max(65535)])],targetPort:["",i.kI.compose([f.isInteger,i.kI.min(1),i.kI.max(65535)])],protocol:[t]})}checkPortMapping(t){this.addProtocolIfNeeed(),this.validatePortMapping(t),this.portMappings.updateValueAndValidity()}addProtocolIfNeeed(){this.isPortMappingFilled(this.portMappings.controls[this.portMappings.length-1])&&this.portMappings.push(this.newEmptyPortMapping(this.protocols[0]))}isPortMappingFilled(t){return!!t.get("port").value&&!!t.get("targetPort").value}validatePortMapping(t){if(0===t)return;const r=this.portMappings.at(t),o=r.get("port"),a=r.get("targetPort"),s=o.value,u=a.value,g=this.isPortMappingFilledOrEmpty(s,u),C=g||!!u;o.setErrors(g||s?null:{required:!0}),a.setErrors(C?null:{required:!0}),this.portMappingForm.updateValueAndValidity()}isPortMappingFilledOrEmpty(t,r){return!t==!r}isRemovable(t){return t!==this.portMappings.length-1}remove(t){this.portMappings.removeAt(t)}isFirst(t){return 0===t}writeValue(){}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(i.QS),e.Y36(O.eN))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-port-mappings"]],inputs:{protocols:"protocols",isExternal:"isExternal"},outputs:{changeExternal:"changeExternal"},features:[e._Bn([{provide:i.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:i.SD,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:8,vars:3,consts:function(){let t,r,o,a,s,u,g,m,C,E,T,N,A,h;return t="Service",r="Port",o="Target port",a="Protocol",s=" Port must be an integer. ",u=" Port cannot be empty. ",g=" Port must be greater than 0. ",m=" Port must be less than 65536. ",C=" Target port must be an integer. ",E=" Target port cannot be empty. ",T=" Target port must be greater than 0. ",N=" Target port must be less than 65536. ",A=" Protocol is required. ",h=" Invalid protocol. ",[["fxLayout","column",3,"formGroup"],["fxLayout","row"],[1,"mat-block","kd-deploy-input-row",2,"width","100%"],["namespace","serviceType","formControlName","serviceType","placeholder",t,"required",""],[3,"value",4,"ngFor","ngForOf"],["formArrayName","portMappings"],["fxLayout","row",3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],["fxLayout","row",3,"formGroupName"],["md-no-float","","fxFlex","30",1,"kd-deploy-input-row","kd-port-form-field"],["matInput","","type","number","name","port","formControlName","port","placeholder",r,3,"required","change"],[4,"ngIf"],["fxFlex","5"],["matInput","","type","number","name","targetPort","formControlName","targetPort","placeholder",o,"min","1","max","65535",3,"required","change"],["md-no-float","","fxFlex","20",1,"kd-deploy-input-row","kd-port-form-field"],["name","protocol","formControlName","protocol","placeholder",a,"kdValidProtocol","","required","",3,"isExternal"],["mode","indeterminate",1,"kd-deploy-form-progress",3,"ngClass"],["fxFlex","10"],["mat-icon-button","",3,"click",4,"ngIf"],s,u,g,m,C,E,T,N,A,h,["mat-icon-button","",3,"click"]]},template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),e.YNc(4,Dt,2,2,"mat-option",4),e.qZA()()(),e.ynx(5)(6,5),e.YNc(7,Bt,23,19,"div",6),e.BQk()(),e.qZA()),2&r&&(e.Q6J("formGroup",o.portMappingForm),e.xp6(4),e.Q6J("ngForOf",o.serviceTypes),e.xp6(3),e.Q6J("ngForOf",o.portMappings.controls))},dependencies:[R.mk,R.sg,R.O5,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.qQ,i.Fd,i.sg,i.u,i.x0,i.CE,F.lW,M.TO,M.KE,V.Hw,$.Nt,le.pW,ce.gD,ue.ey,S.xw,S.yH,ge.oO,bt],styles:[".kd-port-form-field[_ngcontent-%COMP%]{margin:0 0 18px}"]})}return n})();function jt(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,14),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.pQV(t.get("key").value),e.QtT(1)}}function en(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,15),e.qZA())}function tn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,16),e.qZA())}function nn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,17),e.qZA())}function on(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,18),e.qZA())}function rn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,19),e.qZA())}function an(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,20),e.qZA())}function _n(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().index,a=e.oxw();return e.KtG(a.deleteLabel(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}function sn(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"mat-form-field",4)(2,"input",5),e.NdJ("keyup",function(){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.check(a))}),e.qZA(),e.YNc(3,jt,2,1,"mat-error",6),e.YNc(4,en,2,0,"mat-error",6),e.YNc(5,tn,2,0,"mat-error",6),e.YNc(6,nn,2,0,"mat-error",6),e.YNc(7,on,2,0,"mat-error",6),e.qZA(),e._UZ(8,"p",7),e.TgZ(9,"mat-form-field",8)(10,"input",9),e.NdJ("keyup",function(){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.check(a))}),e.qZA(),e.TgZ(11,"mat-hint",10),e._uU(12),e.qZA(),e.YNc(13,rn,2,0,"mat-error",6),e.YNc(14,an,2,0,"mat-error",6),e.qZA(),e._UZ(15,"input",11),e.TgZ(16,"div",12),e.YNc(17,_n,3,0,"button",13),e.qZA()()}if(2&n){const t=_.$implicit,r=_.index,o=e.oxw();e.Q6J("formGroupName",r),e.xp6(2),e.Q6J("readonly",!t.get("editable").value),e.xp6(1),e.Q6J("ngIf",null==t.get("key").errors?null:t.get("key").errors.unique),e.xp6(1),e.Q6J("ngIf",null==t.get("key").errors?null:t.get("key").errors.kdValidLabelKeyPrefixPattern),e.xp6(1),e.Q6J("ngIf",null==t.get("key").errors?null:t.get("key").errors.kdValidLabelKeyNamePattern),e.xp6(1),e.Q6J("ngIf",null==t.get("key").errors?null:t.get("key").errors.kdValidLabelKeyPrefixLength),e.xp6(1),e.Q6J("ngIf",null==t.get("key").errors?null:t.get("key").errors.kdValidLabelKeyNameLength),e.xp6(3),e.Q6J("readonly",!t.get("editable").value),e.xp6(2),e.hij("",null==t.get("value").value?null:t.get("value").value.length," / 253"),e.xp6(1),e.Q6J("ngIf",null==t.get("value").errors?null:t.get("value").errors.kdValidLabelValuePattern),e.xp6(1),e.Q6J("ngIf",null==t.get("value").errors?null:t.get("value").errors.maxlength),e.xp6(3),e.Q6J("ngIf",o.isRemovable(r))}}let ln=(()=>{class n{constructor(t){this.fb_=t,this.propagateChange=r=>{}}ngOnInit(){this.labelForm=this.fb_.group({labels:this.fb_.array([])}),this.labelForm.valueChanges.subscribe(t=>{this.propagateChange(t)});for(let t=0;t<this.labelArr.length;t++)this.addNewLabel(this.labelArr[t].key,this.labelArr[t].value,this.labelArr[t].editable)}validate(t){return this.labelForm.valid?null:{labelValid:{value:this.labels.at(0).errors}}}get labels(){return this.labelForm.get("labels")}addNewLabel(t="",r="",o=!0){this.labels.push(this.fb_.group({key:[{value:t,disabled:!o},i.kI.compose([f.labelKeyNameLength,f.labelKeyNamePattern,f.labelKeyPrefixLength,f.labelKeyPrefixPattern])],value:[{value:r,disabled:!o},i.kI.compose([i.kI.maxLength(253),f.labelValuePattern])],editable:o}))}check(t){this.addIfNeeded(),this.validateKey(t)}isRemovable(t){const r=this.labels.at(this.labels.length-1),o=this.labels.at(t),a=o.get("key").value,s=o.get("value").value,u=o.get("editable").value,g=r.get("key").value,m=r.get("value").value;return!(!u||a===g||s===m)}deleteLabel(t){this.labels.removeAt(t)}validateKey(t){const r=this.labels.at(t).get("key"),o=!this.isKeyDuplicated(t);r.setErrors(o?null:{unique:!0}),this.labelForm.updateValueAndValidity()}isKeyDuplicated(t){let r=0;const o=this.labels.at(t).get("key").value;for(let a=0;a<this.labels.length;a++){const s=this.labels.at(a).get("key").value;if(0!==s.length&&s===o&&r++,r>1)return!0}return!1}addIfNeeded(){const t=this.labels.at(this.labels.length-1);this.isFilled(t)&&this.addNewLabel()}isFilled(t){return 0!==t.get("key").value.length&&0!==t.get("value").value.length}writeValue(t){t.length>0&&this.labels.at(t[0].index).patchValue({value:t[0].value})}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(i.QS))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-deploy-label"]],inputs:{labelArr:"labelArr"},features:[e._Bn([{provide:i.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0},{provide:i.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])],decls:3,vars:2,consts:function(){let t,r,o,a,s,u,g,m,C;return t="key",r="value",o=" " + "\ufffd0\ufffd" + " is not unique ",a=" Prefix is not a valid DNS subdomain prefix (eg. my-domain.com). ",s=" Label key name must be alphanumeric separated by '-', '_' or '.', optionally prefixed by a DNS subdomain and '/'. ",u=" Prefix should not exceed 253 characters. ",g=" Label Key name should not exceed 63 characters. ",m=" Label value must be alphanumeric separated by '.' , '-' or '_'. ",C=" Label Value must not exceed 253 characters. ",[[3,"formGroup"],["formArrayName","labels"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],["md-no-float","","fxFlex","45",1,"kd-deploy-input-row"],["matInput","","name","key","formControlName","key","placeholder",t,3,"readonly","keyup"],[4,"ngIf"],["fxFlex","5"],["md-no-float","","fxFlex","40",1,"kd-deploy-input-row"],["matInput","","name","value","formControlName","value","placeholder",r,3,"readonly","keyup"],["align","end"],["type","hidden","formControlName","editable"],["fxFlex","10"],["mat-icon-button","",3,"click",4,"ngIf"],o,a,s,u,g,m,C,["mat-icon-button","",3,"click"]]},template:function(r,o){1&r&&(e.ynx(0,0),e.TgZ(1,"div",1),e.YNc(2,sn,18,12,"div",2),e.qZA(),e.BQk()),2&r&&(e.Q6J("formGroup",o.labelForm),e.xp6(2),e.Q6J("ngForOf",o.labels.controls))},dependencies:[R.sg,R.O5,i.Fj,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,F.lW,M.TO,M.KE,M.bx,V.Hw,$.Nt,S.yH],encapsulation:2})}return n})(),cn=(()=>{class n{constructor(){}validate(t){return this.shouldSetWarning(t.value)?(this.hasWarning=!0,{warnThreshold:{value:"333"}}):(this.shouldRemoveWarning(t.value)&&(this.hasWarning=!1),null)}shouldSetWarning(t){return t>this.kdWarnThreshold}shouldRemoveWarning(t){return!this.hasWarning&&!this.shouldSetWarning(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=e.lG2({type:n,selectors:[["","kdWarnThreshold",""]],inputs:{kdWarnThreshold:"kdWarnThreshold"},features:[e._Bn([{provide:i.Cf,useExisting:(0,e.Gpc)(()=>n),multi:!0}])]})}return n})();function un(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,73),e.qZA())}function gn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,74),e.qZA())}function pn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,75),e.qZA())}function dn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,76),e.qZA())}function mn(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,77),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.pQV(null==t.containerImage.errors?null:t.containerImage.errors.validImageReference),e.QtT(1)}}function En(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,78),e.qZA())}function Tn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,79),e.qZA())}function Mn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,80),e.qZA())}function Cn(n,_){if(1&n&&(e.TgZ(0,"mat-option",81),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Rn(n,_){if(1&n&&(e.TgZ(0,"mat-option",81),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function fn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,82),e.qZA())}function On(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,83),e.qZA())}function Fn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,84),e.qZA())}function Sn(n,_){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,85),e.qZA())}const Nn=function(n){return{"kd-deploy-form-progress-show":n}};let de=(()=>{class n extends b{constructor(t,r,o,a,s,u,g,m){super(),this.namespace_=t,this.create_=r,this.history_=o,this.http_=a,this.route_=s,this.fb_=u,this.dialog_=g,this.router_=m,this.showMoreOptions_=!1,this.isExternal=!1,this.labelArr=[],this.nameMaxLength=24,this.created_=!1,this.destroyRef=(0,e.f3M)(e.ktI)}get name(){return this.form.get("name")}get containerImage(){return this.form.get("containerImage")}get replicas(){return this.form.get("replicas")}get description(){return this.form.get("description")}get namespace(){return this.form.get("namespace")}get imagePullSecret(){return this.form.get("imagePullSecret")}get cpuRequirement(){return this.form.get("cpuRequirement")}get memoryRequirement(){return this.form.get("memoryRequirement")}get containerCommand(){return this.form.get("containerCommand")}get containerCommandArgs(){return this.form.get("containerCommandArgs")}get runAsPrivileged(){return this.form.get("runAsPrivileged")}get portMappings(){return this.form.get("portMappings")}get variables(){return this.form.get("variables")}get labels(){return this.form.get("labels")}ngOnInit(){this.form=this.fb_.group({name:["",i.kI.compose([i.kI.required,f.namePattern])],containerImage:["",i.kI.required],replicas:[1,i.kI.compose([i.kI.required,f.isInteger])],description:[""],namespace:[this.route_.snapshot.params.namespace||"",i.kI.required],imagePullSecret:[""],cpuRequirement:["",i.kI.compose([i.kI.min(0),f.isInteger])],memoryRequirement:["",i.kI.compose([i.kI.min(0),f.isInteger])],containerCommand:[""],containerCommandArgs:[""],runAsPrivileged:[!1],portMappings:this.fb_.control([]),variables:this.fb_.control([]),labels:this.fb_.control([])}),this.labelArr=[new _e("k8s-app","",!1),new _e],this.name.valueChanges.subscribe(t=>{this.labelArr[0].value=t,this.labels.patchValue([{index:0,value:t}])}),this.namespace.valueChanges.pipe((0,re.sL)(this.destroyRef)).subscribe(t=>{this.name.clearAsyncValidators(),this.name.setAsyncValidators(se(this.http_,t)),this.name.updateValueAndValidity()}),this.http_.get("api/v1/namespace").subscribe(t=>{this.namespaces=t.namespaces.map(r=>r.objectMeta.name),this.namespace.patchValue(this.namespace_.areMultipleNamespacesSelected()?this.namespaces[0]:this.route_.snapshot.params.namespace||this.namespaces[0]),this.form.markAsPristine()}),this.http_.get("api/v1/appdeployment/protocols").subscribe(t=>this.protocols=t.protocols)}changeExternal(t){this.isExternal=t}resetImagePullSecret(){this.imagePullSecret.patchValue("")}hasUnsavedChanges(){return this.form.dirty}isCreateDisabled(){return!this.form.valid||this.create_.isDeployDisabled()}getSecrets(){this.http_.get(`api/v1/secret/${this.namespace.value}`).subscribe(t=>{this.secrets=t.secrets.map(r=>r.objectMeta.name)})}cancel(){this.history_.goToPreviousState("overview")}areMultipleNamespacesSelected(){return this.namespace_.areMultipleNamespacesSelected()}isMoreOptionsEnabled(){return this.showMoreOptions_}switchMoreOptions(){this.showMoreOptions_=!this.showMoreOptions_}handleNamespaceDialog(){this.dialog_.open(mt,{data:{namespaces:this.namespaces}}).afterClosed().pipe((0,D.q)(1)).subscribe(o=>{o?(this.namespaces.push(o),this.namespace.patchValue(o)):this.namespace.patchValue(this.namespaces[0])})}handleCreateSecretDialog(){this.dialog_.open(Ft,{data:{namespace:this.namespace.value}}).afterClosed().pipe((0,D.q)(1)).subscribe(o=>{o?(this.secrets.push(o),this.imagePullSecret.patchValue(o)):this.imagePullSecret.patchValue("")})}isPortMappingFilled(t){return!!t.port&&!!t.targetPort}isVariableFilled(t){return!!t.name}isNumber(t){return"number"==typeof t&&!isNaN(t)}toBackendApiLabels(t){return t[0].key=this.labelArr[0].key,t[0].value=this.labelArr[0].value,t.filter(r=>0!==r.key.length&&0!==r.value.length)}preview(){this.dialog_.open(lt,{width:"900px",data:{spec:this.getSpec()}})}deploy(){const t=this.getSpec();this.create_.deploy(t).then(()=>{this.created_=!0,this.router_.navigate(["overview"],{queryParams:{[w.xt]:t.namespace}})})}getSpec(){const r=this.variables.value.variables||[],o=this.labels.value.labels||[];return{containerImage:this.containerImage.value,imagePullSecret:this.imagePullSecret.value?this.imagePullSecret.value:null,containerCommand:this.containerCommand.value?this.containerCommand.value:null,containerCommandArgs:this.containerCommandArgs.value?this.containerCommandArgs.value:null,isExternal:this.isExternal,name:this.name.value,description:this.description.value?this.description.value:null,portMappings:(this.portMappings.value.portMappings||[]).filter(this.isPortMappingFilled),variables:r.filter(this.isVariableFilled),replicas:this.replicas.value,namespace:this.namespace.value,cpuRequirement:this.isNumber(this.cpuRequirement.value)?this.cpuRequirement.value:null,memoryRequirement:this.isNumber(this.memoryRequirement.value)?`${this.memoryRequirement.value}Mi`:null,labels:this.toBackendApiLabels(o),runAsPrivileged:this.runAsPrivileged.value}}canDeactivate(){return this.form.pristine||this.created_}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(v.L),e.Y36(y),e.Y36(Y.q),e.Y36(O.eN),e.Y36(I.gz),e.Y36(i.QS),e.Y36(d.uw),e.Y36(I.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-create-from-form"]],features:[e.qOj],decls:144,vars:30,consts:function(){let t,r,o,a,s,u,g,m,C,E,T,N,A,h,p,Te,Me,Ce,Re,fe,Oe,Fe,Se,Ne,Ae,he,Ie,$e,Le,ve,ye,Pe,be,De,xe,Ge,Ze,ke,Xe,qe,G,we,Ye,Je,ze,Qe,Ve,Ue,Be,Ke,He,We,je,et;return t="App name",r="An 'app' label with this value will be added to the Deployment and Service that get deployed.",o=" Learn more " + "\ufffd#15\ufffd" + "open_in_new" + "\ufffd/#15\ufffd" + "",a="Container image",s="Enter the URL of a public image on any registry, or a private image hosted on Docker Hub or Google Container Registry.",u=" Learn more " + "\ufffd#26\ufffd" + "open_in_new" + "\ufffd/#26\ufffd" + "",g="Number of pods",m="A Deployment will be created to maintain the desired number of pods across your cluster.",C=" Learn more " + "\ufffd#38\ufffd" + "open_in_new" + "\ufffd/#38\ufffd" + "",E="Optionally, an internal or external Service can be defined to map an incoming Port to a target Port seen by the container.",T=" Learn more " + "\ufffd#47\ufffd" + "open_in_new" + "\ufffd/#47\ufffd" + "",N="Namespace",A=" Create a new namespace... ",h="Namespaces let you partition resources into logically named groups.",p=" Learn more " + "\ufffd#59\ufffd" + "open_in_new" + "\ufffd/#59\ufffd" + "",Te="Description",Me=" The description will be added as an annotation to the Deployment and displayed in the application's details. ",Ce=" Labels ",Re="The specified labels will be applied to the created Deployment, Service (if any) and Pods. Common labels include release, environment, tier, partition and track.",fe=" Learn more " + "\ufffd#76\ufffd" + "open_in_new" + "\ufffd/#76\ufffd" + "",Oe="Image Pull Secret",Fe=" Create a new secret... ",Se="The specified image could require a pull secret credential if it is private. You may choose an existing secret or create a new one.",Ne=" Learn more " + "\ufffd#88\ufffd" + "open_in_new" + "\ufffd/#88\ufffd" + "",Ae="CPU requirement (cores)",he="Memory requirement (MiB)",Ie="You can specify minimum CPU and memory requirements for the container.",$e=" Learn more " + "\ufffd#105\ufffd" + "open_in_new" + "\ufffd/#105\ufffd" + "",Le="Run command",ve="Run command arguments",ye="By default, your containers run the selected image's default entrypoint command. You can use the command options to override the default.",Pe=" Learn more " + "\ufffd#117\ufffd" + "open_in_new" + "\ufffd/#117\ufffd" + "",be="Run as privileged",De="Processes in privileged containers are equivalent to processes running as root on the host.",xe=" Learn more " + "\ufffd#127\ufffd" + "open_in_new" + "\ufffd/#127\ufffd" + "",Ge="Environment variables available for use in the container. Values can reference other variables using $(VAR_NAME) syntax.",Ze=" Learn more " + "\ufffd#135\ufffd" + "open_in_new" + "\ufffd/#135\ufffd" + "",ke=" Deploy\n",Xe=" Preview\n",qe=" Cancel\n",G="{VAR_SELECT, select, true {Hide advanced options} other {Show advanced options}}",G=e.Zx4(G,{VAR_SELECT:"\ufffd0\ufffd"}),we=" " + G + "\n",Ye=" Deployment or service with this name already exists within namespace. ",Je=" Application name is required. ",ze=" Application name must start with a lowercase letter and contain only lowercase letters, numbers, and '-' between words. ",Qe=" Container image is required ",Ve=" Container image is invalid: " + "\ufffd0\ufffd" + " ",Ue=" Number of pods is required ",Be=" Number of pods must be a positive integer ",Ke=" Setting high number of pods may cause performance issues of the cluster and Dashboard UI. ",He=" CPU requirement must be given as a positive number. ",We=" CPU requirement must be given as a valid number. ",je=" Memory requirement must be given as a positive number. ",et=" Memory requirement must be given as a valid number. ",[["novalidate","",3,"formGroup"],["matInput","","formControlName","name","placeholder",t,"kdUniqueName","","required","",3,"maxlength","namespace"],["mode","indeterminate",1,"kd-deploy-form-progress",3,"ngClass"],["align","end"],[4,"ngIf"],r,["href","https://kubernetes.io/docs/user-guide/labels/","target","_blank","tabindex","-1"],o,[1,"material-icons"],["matInput","","formControlName","containerImage","placeholder",a,"kdValidImageReference","","required",""],s,["href","https://kubernetes.io/docs/user-guide/images/","target","_blank","tabindex","-1"],u,["matInput","","type","number","formControlName","replicas","placeholder",g,"min","1","kdWarnThreshold","100","required",""],m,["href","https://kubernetes.io/docs/concepts/workloads/controllers/deployment/","target","_blank","tabindex","-1"],C,["fxLayout","column"],["formControlName","portMappings",3,"protocols","isExternal","changeExternal"],E,["href","https://kubernetes.io/docs/user-guide/services/","target","_blank","tabindex","-1"],T,["formControlName","namespace","placeholder",N,"required","",3,"click"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],A,h,["href","https://kubernetes.io/docs/admin/namespaces/","target","_blank","tabindex","-1"],p,[3,"hidden"],["formControlName","description","matInput","","placeholder",Te],Me,[1,"kd-margin-bottom"],Ce,["formControlName","labels",3,"labelArr"],Re,fe,["formControlName","imagePullSecret","placeholder",Oe,3,"click"],Fe,Se,["href","https://kubernetes.io/docs/user-guide/secrets/","target","_blank","tabindex","-1"],Ne,["fxLayout","row"],["fxFlex","auto"],["matInput","","type","number","placeholder",Ae,"name","cpuRequirement","min","0","formControlName","cpuRequirement"],["fxFlex","5"],["matInput","","type","number","placeholder",he,"name","memoryRequirement","min","0","formControlName","memoryRequirement"],Ie,["href","https://kubernetes.io/docs/admin/limitrange/","target","_blank","tabindex","-1"],$e,[1,"kd-block"],["matInput","","placeholder",Le,"formControlName","containerCommand"],["matInput","","placeholder",ve,"formControlName","containerCommandArgs"],ye,["href","https://kubernetes.io/docs/user-guide/containers/","target","_blank","tabindex","-1"],Pe,["color","primary","formControlName","runAsPrivileged"],be,De,["href","https://kubernetes.io/docs/concepts/workloads/pods/#privileged-mode-for-containers","target","_blank","tabindex","-1"],xe,["formControlName","variables"],Ge,["href","https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/","target","_blank","tabindex","-1"],Ze,["type","button","color","primary","mat-raised-button","",3,"disabled","click"],ke,["type","button","color","primary","mat-button","",3,"disabled","click"],Xe,["type","button","color","primary","mat-button","",3,"click"],qe,["mat-button","","color","primary",3,"hidden","click"],we,Ye,Je,ze,Qe,Ve,Ue,Be,Ke,[3,"value"],He,We,je,et]},template:function(r,o){1&r&&(e.TgZ(0,"form",0)(1,"kd-help-section")(2,"mat-form-field"),e._UZ(3,"input",1)(4,"mat-progress-bar",2),e.TgZ(5,"mat-hint",3),e._uU(6),e.qZA(),e.YNc(7,un,2,0,"mat-error",4),e.YNc(8,gn,2,0,"mat-error",4),e.YNc(9,pn,2,0,"mat-error",4),e.qZA(),e.TgZ(10,"kd-user-help"),e.ynx(11),e.SDv(12,5),e.BQk(),e.TgZ(13,"a",6),e.tHW(14,7),e._UZ(15,"i",8),e.N_p(),e.qZA()()(),e.TgZ(16,"kd-help-section")(17,"mat-form-field"),e._UZ(18,"input",9),e.YNc(19,dn,2,0,"mat-error",4),e.YNc(20,mn,2,1,"mat-error",4),e.qZA(),e.TgZ(21,"kd-user-help"),e.ynx(22),e.SDv(23,10),e.BQk(),e.TgZ(24,"a",11),e.tHW(25,12),e._UZ(26,"i",8),e.N_p(),e.qZA()()(),e.TgZ(27,"kd-help-section")(28,"mat-form-field"),e._UZ(29,"input",13),e.YNc(30,En,2,0,"mat-error",4),e.YNc(31,Tn,2,0,"mat-error",4),e.YNc(32,Mn,2,0,"mat-error",4),e.qZA(),e.TgZ(33,"kd-user-help"),e.ynx(34),e.SDv(35,14),e.BQk(),e.TgZ(36,"a",15),e.tHW(37,16),e._UZ(38,"i",8),e.N_p(),e.qZA()()(),e.TgZ(39,"kd-help-section")(40,"div",17)(41,"kd-port-mappings",18),e.NdJ("changeExternal",function(s){return o.changeExternal(s)}),e.qZA()(),e.TgZ(42,"kd-user-help"),e.ynx(43),e.SDv(44,19),e.BQk(),e.TgZ(45,"a",20),e.tHW(46,21),e._UZ(47,"i",8),e.N_p(),e.qZA()()(),e.TgZ(48,"kd-help-section")(49,"mat-form-field")(50,"mat-select",22),e.NdJ("click",function(){return o.resetImagePullSecret()}),e.YNc(51,Cn,2,2,"mat-option",23),e.TgZ(52,"mat-option",24),e.NdJ("click",function(){return o.handleNamespaceDialog()}),e.SDv(53,25),e.qZA()()(),e.TgZ(54,"kd-user-help"),e.ynx(55),e.SDv(56,26),e.BQk(),e.TgZ(57,"a",27),e.tHW(58,28),e._UZ(59,"i",8),e.N_p(),e.qZA()()(),e.TgZ(60,"div",29)(61,"kd-help-section")(62,"mat-form-field"),e._UZ(63,"textarea",30),e.qZA(),e.TgZ(64,"kd-user-help"),e.SDv(65,31),e.qZA()(),e.TgZ(66,"kd-help-section")(67,"div",17)(68,"div",32),e.SDv(69,33),e.qZA(),e._UZ(70,"kd-deploy-label",34),e.qZA(),e.TgZ(71,"kd-user-help"),e.ynx(72),e.SDv(73,35),e.BQk(),e.TgZ(74,"a",6),e.tHW(75,36),e._UZ(76,"i",8),e.N_p(),e.qZA()()(),e.TgZ(77,"kd-help-section")(78,"mat-form-field")(79,"mat-select",37),e.NdJ("click",function(){return o.getSecrets()}),e.YNc(80,Rn,2,2,"mat-option",23),e.TgZ(81,"mat-option",24),e.NdJ("click",function(){return o.handleCreateSecretDialog()}),e.SDv(82,38),e.qZA()()(),e.TgZ(83,"kd-user-help"),e.ynx(84),e.SDv(85,39),e.BQk(),e.TgZ(86,"a",40),e.tHW(87,41),e._UZ(88,"i",8),e.N_p(),e.qZA()()(),e.TgZ(89,"kd-help-section")(90,"div",42)(91,"mat-form-field",43),e._UZ(92,"input",44),e.YNc(93,fn,2,0,"mat-error",4),e.YNc(94,On,2,0,"mat-error",4),e.qZA(),e._UZ(95,"div",45),e.TgZ(96,"mat-form-field",43),e._UZ(97,"input",46),e.YNc(98,Fn,2,0,"mat-error",4),e.YNc(99,Sn,2,0,"mat-error",4),e.qZA()(),e.TgZ(100,"kd-user-help"),e.ynx(101),e.SDv(102,47),e.BQk(),e.TgZ(103,"a",48),e.tHW(104,49),e._UZ(105,"i",8),e.N_p(),e.qZA()()(),e.TgZ(106,"kd-help-section")(107,"div")(108,"mat-form-field",50),e._UZ(109,"input",51),e.qZA(),e.TgZ(110,"mat-form-field",50),e._UZ(111,"input",52),e.qZA()(),e.TgZ(112,"kd-user-help"),e.ynx(113),e.SDv(114,53),e.BQk(),e.TgZ(115,"a",54),e.tHW(116,55),e._UZ(117,"i",8),e.N_p(),e.qZA()()(),e.TgZ(118,"kd-help-section")(119,"div",50)(120,"mat-checkbox",56),e.SDv(121,57),e.qZA()(),e.TgZ(122,"kd-user-help"),e.ynx(123),e.SDv(124,58),e.BQk(),e.TgZ(125,"a",59),e.tHW(126,60),e._UZ(127,"i",8),e.N_p(),e.qZA()()(),e.TgZ(128,"kd-help-section"),e._UZ(129,"kd-environment-variables",61),e.TgZ(130,"kd-user-help"),e.ynx(131),e.SDv(132,62),e.BQk(),e.TgZ(133,"a",63),e.tHW(134,64),e._UZ(135,"i",8),e.N_p(),e.qZA()()()()(),e.TgZ(136,"button",65),e.NdJ("click",function(){return o.deploy()}),e.SDv(137,66),e.qZA(),e.TgZ(138,"button",67),e.NdJ("click",function(){return o.preview()}),e.SDv(139,68),e.qZA(),e.TgZ(140,"button",69),e.NdJ("click",function(){return o.cancel()}),e.SDv(141,70),e.qZA(),e.TgZ(142,"button",71),e.NdJ("click",function(){return o.switchMoreOptions()}),e.SDv(143,72),e.qZA()),2&r&&(e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("maxlength",o.nameMaxLength)("namespace",o.namespace.value),e.xp6(1),e.Q6J("ngClass",e.VKq(28,Nn,o.name.pending)),e.xp6(2),e.AsE("",null==o.name.value?null:o.name.value.length," / ",o.nameMaxLength,""),e.xp6(1),e.Q6J("ngIf",null==o.name.errors?null:o.name.errors.uniqueName),e.xp6(1),e.Q6J("ngIf",null==o.name.errors?null:o.name.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.name.errors?null:o.name.errors.namePattern),e.xp6(10),e.Q6J("ngIf",null==o.containerImage.errors?null:o.containerImage.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.containerImage.errors?null:o.containerImage.errors.validImageReference),e.xp6(10),e.Q6J("ngIf",null==o.replicas.errors?null:o.replicas.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.replicas.errors?null:o.replicas.errors.kdValidInteger),e.xp6(1),e.Q6J("ngIf",null==o.replicas.errors?null:o.replicas.errors.warnThreshold),e.xp6(9),e.Q6J("protocols",o.protocols)("isExternal",o.isExternal),e.xp6(10),e.Q6J("ngForOf",o.namespaces),e.xp6(9),e.Q6J("hidden",!o.isMoreOptionsEnabled()),e.xp6(10),e.Q6J("labelArr",o.labelArr),e.xp6(10),e.Q6J("ngForOf",o.secrets),e.xp6(13),e.Q6J("ngIf",null==o.cpuRequirement.errors?null:o.cpuRequirement.errors.min),e.xp6(1),e.Q6J("ngIf",null==o.cpuRequirement.errors?null:o.cpuRequirement.errors.kdValidInteger),e.xp6(4),e.Q6J("ngIf",null==o.memoryRequirement.errors?null:o.memoryRequirement.errors.min),e.xp6(1),e.Q6J("ngIf",null==o.memoryRequirement.errors?null:o.memoryRequirement.errors.kdValidInteger),e.xp6(37),e.Q6J("disabled",o.isCreateDisabled()),e.xp6(2),e.Q6J("disabled",o.isCreateDisabled()),e.xp6(4),e.Q6J("hidden",!o.isMoreOptionsEnabled()),e.xp6(1),e.pQV(o.isMoreOptionsEnabled()),e.QtT(143))},dependencies:[R.mk,R.sg,R.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.nD,i.qQ,i.sg,i.u,F.lW,St.oG,M.TO,M.KE,M.bx,$.Nt,le.pW,ce.gD,ue.ey,S.xw,S.yH,ge.oO,J,z,It,Tt,Lt,Wt,ln,cn],styles:[".kd-block[_ngcontent-%COMP%]{display:block}.kd-deploy-input-row[_ngcontent-%COMP%]{margin-bottom:8px;margin-top:8px}  mat-progress-bar.kd-deploy-form-progress{clear:left;height:.5px;margin-bottom:-.5px;overflow:hidden;top:5px}  mat-progress-bar.kd-deploy-form-progress:not(.kd-deploy-form-progress-show){visibility:hidden}"]})}return n})();function hn(n,_){1&n&&(e.TgZ(0,"span"),e.SDv(1,10),e.qZA())}function In(n,_){1&n&&(e.TgZ(0,"span"),e.SDv(1,11),e.qZA())}let me=(()=>{class n extends b{constructor(t,r,o,a){super(),this.namespace_=t,this.create_=r,this.history_=o,this.router_=a,this.inputData="",this.created_=!1}isCreateDisabled(){return!this.inputData||0===this.inputData.length}create(){this.create_.createContent(this.inputData).then(()=>{this.created_=!0,this.router_.navigate(["overview"],{queryParams:{[w.xt]:this.namespace_.current()}})})}cancel(){this.history_.goToPreviousState("overview")}areMultipleNamespacesSelected(){return this.namespace_.areMultipleNamespacesSelected()}canDeactivate(){return this.isCreateDisabled()||this.created_}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(v.L),e.Y36(y),e.Y36(Y.q),e.Y36(I.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-create-from-input"]],features:[e.qOj],decls:11,vars:4,consts:function(){let t,r,o,a,s;return t=" Learn more " + "\ufffd#5\ufffd" + "open_in_new" + "\ufffd/#5\ufffd" + "",r=" Upload\n",o=" Cancel\n",a=" Enter YAML or JSON content specifying the resources to create to the namespace specified in the file. ",s=" Enter YAML or JSON content specifying the resources to create to the currently selected namespace. ",[[1,"kd-create-from-input-info"],[4,"ngIf"],["href","https://kubernetes.io/docs/tasks/run-application/run-stateless-application-deployment/","target","_blank"],t,[1,"material-icons"],[3,"text","textChange"],["type","button","color","primary","mat-raised-button","",3,"disabled","click"],r,["type","button","color","primary","mat-button","",3,"click"],o,a,s]},template:function(r,o){1&r&&(e.TgZ(0,"div",0),e.YNc(1,hn,2,0,"span",1),e.YNc(2,In,2,0,"span",1),e.TgZ(3,"a",2),e.tHW(4,3),e._UZ(5,"i",4),e.N_p(),e.qZA()(),e.TgZ(6,"kd-text-input",5),e.NdJ("textChange",function(s){return o.inputData=s}),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return o.create()}),e.SDv(8,7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.cancel()}),e.SDv(10,9),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",o.areMultipleNamespacesSelected()),e.xp6(1),e.Q6J("ngIf",!o.areMultipleNamespacesSelected()),e.xp6(4),e.Q6J("text",o.inputData),e.xp6(1),e.Q6J("disabled",o.isCreateDisabled()))},dependencies:[R.O5,F.lW,L.t],styles:[".kd-create-from-input-info[_ngcontent-%COMP%]{margin-bottom:24px;padding:0 4px}.kd-create-from-input-info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:14px}.kd-create-from-input-button[_ngcontent-%COMP%]{margin-left:0}  .kd-ace{margin-bottom:24px}"]})}return n})();var $n=c(7452),Ee=c(5716);const Ln={path:"",component:(()=>{class n extends b{canDeactivate(){return this.fromInput.canDeactivate()&&this.fromFile.canDeactivate()&&this.fromForm.canDeactivate()}static#e=this.\u0275fac=function(){let t;return function(o){return(t||(t=e.n5z(n)))(o||n)}}();static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["kd-create"]],viewQuery:function(r,o){if(1&r&&(e.Gf(me,5),e.Gf(ne,5),e.Gf(de,5)),2&r){let a;e.iGM(a=e.CRH())&&(o.fromInput=a.first),e.iGM(a=e.CRH())&&(o.fromFile=a.first),e.iGM(a=e.CRH())&&(o.fromForm=a.first)}},features:[e.qOj],decls:8,vars:1,consts:function(){let t,r,o;return t="Create from input",r="Create from file",o="Create from form",[[1,"kd-create-container"],["label",t],["label",r],["label",o]]},template:function(r,o){1&r&&(e.TgZ(0,"mat-card",0)(1,"mat-tab-group")(2,"mat-tab",1),e._UZ(3,"kd-create-from-input"),e.qZA(),e.TgZ(4,"mat-tab",2),e._UZ(5,"kd-create-from-file"),e.qZA(),e.TgZ(6,"mat-tab",3),e._UZ(7,"kd-create-from-form"),e.qZA()()()),2&r&&(e.xp6(1),e.Q6J("@.disabled",!0))},dependencies:[$n.a8,Ee.SP,Ee.uX,de,me,ne],styles:[".kd-create-container[_ngcontent-%COMP%]{padding:0}.kd-create-container[_ngcontent-%COMP%]     .mat-tab-body-content{height:auto;padding:20px}"]})}return n})(),data:{breadcrumb:rt.SX.Create},canDeactivate:[ee]};let vn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[I.Bz.forChild([Ln]),I.Bz]})}return n})(),yn=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[ee],imports:[te.m,H.K,ot,tt,vn]})}return n})()}}]);