"use strict";(self.webpackChunkkubernetes_dashboard=self.webpackChunkkubernetes_dashboard||[]).push([[862],{2862:(yi,ie,r)=>{r.r(ie),r.d(ie,{SettingsModule:()=>Ii});var Xe=r(7833),Fe=r(5816),ae=r(2656);const F=function(){try{var e=(0,ae.Z)(Object,"defineProperty");return e({},"",{}),e}catch{}}(),oe=function ze(e,n,s){"__proto__"==n&&F?F(e,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[n]=s},B=function we(e,n){return e===n||e!=e&&n!=n};var Je=Object.prototype.hasOwnProperty;const Ue=function Ye(e,n,s){var i=e[n];(!Je.call(e,n)||!B(i,s)||void 0===s&&!(n in e))&&oe(e,n,s)},le=function ke(e){return e};var re=Math.max;const tt=function et(e){return function(){return e}};var ot=Date.now;const _t=function lt(e){var n=0,s=0;return function(){var i=ot(),a=16-(i-s);if(s=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(F?function(e,n){return F(e,"toString",{configurable:!0,enumerable:!1,value:tt(n),writable:!0})}:le),gt=function ct(e,n){return _t(function Ve(e,n,s){return n=re(void 0===n?e.length-1:n,0),function(){for(var i=arguments,a=-1,o=re(i.length-n,0),l=Array(o);++a<o;)l[a]=i[n+a];a=-1;for(var _=Array(n+1);++a<n;)_[a]=i[a];return _[n]=s(l),function We(e,n,s){switch(s.length){case 0:return e.call(n);case 1:return e.call(n,s[0]);case 2:return e.call(n,s[0],s[1]);case 3:return e.call(n,s[0],s[1],s[2])}return e.apply(n,s)}(e,this,_)}}(e,n,le),e+"")};var W=r(6247),ut=/^(?:0|[1-9]\d*)$/;const _e=function ft(e,n){var s=typeof e;return!!(n=n??9007199254740991)&&("number"==s||"symbol"!=s&&ut.test(e))&&e>-1&&e%1==0&&e<n};var ce=r(5829);var Nt=r(5727),z=r(5489),q=r(9354),ge=r(4583),Lt=Object.prototype.hasOwnProperty;const de=function Ct(e,n){var s=(0,z.Z)(e),i=!s&&(0,Nt.Z)(e),a=!s&&!i&&(0,q.Z)(e),o=!s&&!i&&!a&&(0,ge.Z)(e),l=s||i||a||o,_=l?function Tt(e,n){for(var s=-1,i=Array(e);++s<e;)i[s]=n(s);return i}(e.length,String):[],c=_.length;for(var g in e)(n||Lt.call(e,g))&&(!l||!("length"==g||a&&("offset"==g||"parent"==g)||o&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||_e(g,c)))&&_.push(g);return _};var vt=r(801);var It=Object.prototype.hasOwnProperty;const Rt=function yt(e){if(!(0,ce.Z)(e))return function Mt(e){var n=[];if(null!=e)for(var s in Object(e))n.push(s);return n}(e);var n=(0,vt.Z)(e),s=[];for(var i in e)"constructor"==i&&(n||!It.call(e,i))||s.push(i);return s},Pt=function St(e){return gt(function(n,s){var i=-1,a=s.length,o=a>1?s[a-1]:void 0,l=a>2?s[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,l&&function mt(e,n,s){if(!(0,ce.Z)(s))return!1;var i=typeof n;return!!("number"==i?(0,W.Z)(s)&&_e(n,s.length):"string"==i&&n in s)&&B(s[n],e)}(s[0],s[1],l)&&(o=a<3?void 0:o,a=1),n=Object(n);++i<a;){var _=s[i];_&&e(n,_,i,o)}return n})}(function(e,n){!function Qe(e,n,s,i){var a=!s;s||(s={});for(var o=-1,l=n.length;++o<l;){var _=n[o],c=i?i(s[_],e[_],_,s,e):void 0;void 0===c&&(c=e[_]),a?oe(s,_,c):Ue(s,_,c)}}(n,function $t(e){return(0,W.Z)(e)?de(e,!0):Rt(e)}(n),e)});var xt=r(8645),t=r(5879);let V=(()=>{class e{constructor(){this.onSettingsChange=new xt.x,this.settings_={}}get settings(){return this.settings_}set settings(s){this.settings_=Pt(this.settings_,s),this.onSettingsChange.next(this.settings_)}reset(){this.settings_={},this.onSettingsChange.next(this.settings_)}static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var ue=r(8109),Zt=r(960);const w=function Bt(e,n){for(var s=e.length;s--;)if(B(e[s][0],n))return s;return-1};var wt=Array.prototype.splice;function R(e){var n=-1,s=null==e?0:e.length;for(this.clear();++n<s;){var i=e[n];this.set(i[0],i[1])}}R.prototype.clear=function Xt(){this.__data__=[],this.size=0},R.prototype.delete=function Ht(e){var n=this.__data__,s=w(n,e);return!(s<0||(s==n.length-1?n.pop():wt.call(n,s,1),--this.size,0))},R.prototype.get=function Yt(e){var n=this.__data__,s=w(n,e);return s<0?void 0:n[s][1]},R.prototype.has=function Qt(e){return w(this.__data__,e)>-1},R.prototype.set=function kt(e,n){var s=this.__data__,i=w(s,e);return i<0?(++this.size,s.push([e,n])):s[i][1]=n,this};const H=R;var fe=r(2847);const P=(0,ae.Z)(Object,"create");var ds=Object.prototype.hasOwnProperty;var ps=Object.prototype.hasOwnProperty;function $(e){var n=-1,s=null==e?0:e.length;for(this.clear();++n<s;){var i=e[n];this.set(i[0],i[1])}}$.prototype.clear=function os(){this.__data__=P?P(null):{},this.size=0},$.prototype.delete=function rs(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},$.prototype.get=function us(e){var n=this.__data__;if(P){var s=n[e];return"__lodash_hash_undefined__"===s?void 0:s}return ds.call(n,e)?n[e]:void 0},$.prototype.has=function Ss(e){var n=this.__data__;return P?void 0!==n[e]:ps.call(n,e)},$.prototype.set=function As(e,n){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=P&&void 0===n?"__lodash_hash_undefined__":n,this};const me=$,J=function Ms(e,n){var s=e.__data__;return function Cs(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?s["string"==typeof n?"string":"hash"]:s.map};function b(e){var n=-1,s=null==e?0:e.length;for(this.clear();++n<s;){var i=e[n];this.set(i[0],i[1])}}b.prototype.clear=function Es(){this.size=0,this.__data__={hash:new me,map:new(fe.Z||H),string:new me}},b.prototype.delete=function Os(e){var n=J(this,e).delete(e);return this.size-=n?1:0,n},b.prototype.get=function Is(e){return J(this,e).get(e)},b.prototype.has=function Rs(e){return J(this,e).has(e)},b.prototype.set=function bs(e,n){var s=J(this,e),i=s.size;return s.set(e,n),this.size+=s.size==i?0:1,this};const pe=b;function D(e){var n=this.__data__=new H(e);this.size=n.size}D.prototype.clear=function qt(){this.__data__=new H,this.size=0},D.prototype.delete=function jt(e){var n=this.__data__,s=n.delete(e);return this.size=n.size,s},D.prototype.get=function ts(e){return this.__data__.get(e)},D.prototype.has=function ns(e){return this.__data__.has(e)},D.prototype.set=function xs(e,n){var s=this.__data__;if(s instanceof H){var i=s.__data__;if(!fe.Z||i.length<199)return i.push([e,n]),this.size=++s.size,this;s=this.__data__=new pe(i)}return s.set(e,n),this.size=s.size,this};const j=D;function Y(e){var n=-1,s=null==e?0:e.length;for(this.__data__=new pe;++n<s;)this.add(e[n])}Y.prototype.add=Y.prototype.push=function Fs(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Y.prototype.has=function zs(e){return this.__data__.has(e)};const Hs=Y,Ys=function Js(e,n){for(var s=-1,i=null==e?0:e.length;++s<i;)if(n(e[s],s,e))return!0;return!1},Qs=function Us(e,n){return e.has(n)},Se=function Ws(e,n,s,i,a,o){var l=1&s,_=e.length,c=n.length;if(_!=c&&!(l&&c>_))return!1;var g=o.get(e),N=o.get(n);if(g&&N)return g==n&&N==e;var h=-1,f=!0,E=2&s?new Hs:void 0;for(o.set(e,n),o.set(n,e);++h<_;){var T=e[h],A=n[h];if(i)var C=l?i(A,T,h,n,e,o):i(T,A,h,e,n,o);if(void 0!==C){if(C)continue;f=!1;break}if(E){if(!Ys(n,function(v,M){if(!Qs(E,M)&&(T===v||a(T,v,s,i,o)))return E.push(M)})){f=!1;break}}else if(T!==A&&!a(T,A,s,i,o)){f=!1;break}}return o.delete(e),o.delete(n),f};var he=r(6875);const Te=r(4131).Z.Uint8Array,en=function js(e){var n=-1,s=Array(e.size);return e.forEach(function(i,a){s[++n]=[a,i]}),s},sn=function tn(e){var n=-1,s=Array(e.size);return e.forEach(function(i){s[++n]=i}),s};var Ae=he.Z?he.Z.prototype:void 0,ee=Ae?Ae.valueOf:void 0;var Gn=Object.prototype.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols;const yn=Ne?function(e){return null==e?[]:(e=Object(e),function Ln(e,n){for(var s=-1,i=null==e?0:e.length,a=0,o=[];++s<i;){var l=e[s];n(l,s,e)&&(o[a++]=l)}return o}(Ne(e),function(n){return Gn.call(e,n)}))}:function vn(){return[]};var Rn=r(3617);const bn=function $n(e){return(0,W.Z)(e)?de(e):(0,Rn.Z)(e)},Ee=function Dn(e){return function Nn(e,n,s){var i=n(e);return(0,z.Z)(e)?i:function Tn(e,n){for(var s=-1,i=n.length,a=e.length;++s<i;)e[a+s]=n[s];return e}(i,s(e))}(e,bn,yn)};var Zn=Object.prototype.hasOwnProperty;var Le=r(6148),Ce="[object Arguments]",ve="[object Array]",U="[object Object]",Me=Object.prototype.hasOwnProperty;const Hn=function wn(e,n,s,i,a,o){var l=(0,z.Z)(e),_=(0,z.Z)(n),c=l?ve:(0,Le.Z)(e),g=_?ve:(0,Le.Z)(n),N=(c=c==Ce?U:c)==U,h=(g=g==Ce?U:g)==U,f=c==g;if(f&&(0,q.Z)(e)){if(!(0,q.Z)(n))return!1;l=!0,N=!1}if(f&&!N)return o||(o=new j),l||(0,ge.Z)(e)?Se(e,n,s,i,a,o):function Sn(e,n,s,i,a,o,l){switch(s){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!o(new Te(e),new Te(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return B(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var _=en;case"[object Set]":if(_||(_=sn),e.size!=n.size&&!(1&i))return!1;var g=l.get(e);if(g)return g==n;i|=2,l.set(e,n);var N=Se(_(e),_(n),i,a,o,l);return l.delete(e),N;case"[object Symbol]":if(ee)return ee.call(e)==ee.call(n)}return!1}(e,n,c,s,i,a,o);if(!(1&s)){var E=N&&Me.call(e,"__wrapped__"),T=h&&Me.call(n,"__wrapped__");if(E||T){var A=E?e.value():e,C=T?n.value():n;return o||(o=new j),a(A,C,s,i,o)}}return!!f&&(o||(o=new j),function Xn(e,n,s,i,a,o){var l=1&s,_=Ee(e),c=_.length;if(c!=Ee(n).length&&!l)return!1;for(var h=c;h--;){var f=_[h];if(!(l?f in n:Zn.call(n,f)))return!1}var E=o.get(e),T=o.get(n);if(E&&T)return E==n&&T==e;var A=!0;o.set(e,n),o.set(n,e);for(var C=l;++h<c;){var v=e[f=_[h]],M=n[f];if(i)var X=l?i(M,v,f,n,e,o):i(v,M,f,e,n,o);if(!(void 0===X?v===M||a(v,M,s,i,o):X)){A=!1;break}C||(C="constructor"==f)}if(A&&!C){var y=e.constructor,u=n.constructor;y!=u&&"constructor"in e&&"constructor"in n&&!("function"==typeof y&&y instanceof y&&"function"==typeof u&&u instanceof u)&&(A=!1)}return o.delete(e),o.delete(n),A}(e,n,s,i,a,o))};var Oe=r(1196);const Jn=function Ge(e,n,s,i,a){return e===n||(null==e||null==n||!(0,Oe.Z)(e)&&!(0,Oe.Z)(n)?e!=e&&n!=n:Hn(e,n,s,i,Ge,a))},Un=function Yn(e,n){return Jn(e,n)};var Qn=r(2096),Kn=r(9397),kn=r(6306),Q=r(8180),Wn=r(4664),qn=r(3213),Vn=r(5266),Ie=r(6190),p=r(8189),x=r(1075);let jn=(()=>{class e{constructor(s){this.dialogRef=s}onNoClick(){this.dialogRef.close()}static#e=this.\u0275fac=function(i){return new(i||e)(t.Y36(p.so))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-settings-save-anyway-dialog"]],decls:9,vars:2,consts:function(){let s,i,a,o;return s=" Settings have changed since last reload\n",i="Do you want to save them anyways?",a=" Save ",o=" Refresh ",[["mat-dialog-title",""],s,i,["mat-button","","color","primary",3,"mat-dialog-close"],a,o]},template:function(i,a){1&i&&(t.TgZ(0,"h2",0),t.SDv(1,1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t.SDv(3,2),t.qZA(),t.TgZ(4,"mat-dialog-actions")(5,"button",3),t.SDv(6,4),t.qZA(),t.TgZ(7,"button",3),t.SDv(8,5),t.qZA()()),2&i&&(t.xp6(5),t.Q6J("mat-dialog-close",!0),t.xp6(2),t.Q6J("mat-dialog-close",!1))},dependencies:[x.lW,p.ZT,p.uh,p.xY,p.H8],encapsulation:2})}return e})();var G=r(1993),ei=r(8584),ti=r(3479),m=r(6223),K=r(6005),te=r(5565),si=r(538),ni=r(1933),S=r(3814),ye=r(6484);const ii=["*"];let se=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-settings-entry"]],inputs:{key:"key",desc:"desc"},ngContentSelectors:ii,decls:6,vars:2,consts:[["fxLayout","column","fxLayoutAlign","center none","fxFlex",""],[1,"kd-muted"]],template:function(i,a){1&i&&(t.F$t(),t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",1),t._uU(4),t.qZA()(),t.Hsn(5,0,["class","kd-settings-entry-form","fxFlex",""])),2&i&&(t.xp6(2),t.Oqu(a.key),t.xp6(2),t.Oqu(a.desc))},dependencies:[S.xw,S.Wh,S.yH],encapsulation:2})}return e})();var I=r(5305),ai=r(7398),Re=r(4707),O=r(6814),ne=r(6649),k=r(8823),$e=r(7335);function oi(e,n){if(1&e&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}let li=(()=>{class e{constructor(s){this.data=s}static#e=this.\u0275fac=function(i){return new(i||e)(t.Y36(p.WI))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-namespace-settings-add-dialog"]],decls:18,vars:7,consts:function(){let s,i,a,o,l;return s=" Add Namespace ",i="Provide a namespace name that should be added to the namespace fallback list",a="Namespace",o=" Add ",l=" Close ",[["fxFlex","","fxLayout","column"],["mat-dialog-title",""],s,["fxLayout","column",1,"kd-dialog-text"],i,["fxFlex",""],["name","defaultNamespace","placeholder",a,"type","text","matInput","",3,"matAutocomplete"],["namespaceInput",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","mat-dialog-close"],o,["mat-button","","color","primary",3,"mat-dialog-close"],l,[3,"value"]]},template:function(i,a){if(1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t.SDv(2,2),t.qZA(),t.TgZ(3,"mat-dialog-content",3)(4,"div"),t.SDv(5,4),t.qZA(),t.TgZ(6,"mat-form-field",5),t._UZ(7,"input",6,7),t.TgZ(9,"mat-autocomplete",null,8),t.YNc(11,oi,2,2,"mat-option",9),t.ALo(12,"kdFilterBy"),t.qZA()()(),t.TgZ(13,"mat-dialog-actions")(14,"button",10),t.SDv(15,11),t.qZA(),t.TgZ(16,"button",12),t.SDv(17,13),t.qZA()()()),2&i){const o=t.MAs(8),l=t.MAs(10);t.xp6(7),t.Q6J("matAutocomplete",l),t.xp6(4),t.Q6J("ngForOf",t.xi3(12,4,a.data.namespaces,o.value)),t.xp6(3),t.Q6J("disabled",0===(null==o||null==o.value?null:o.value.length))("mat-dialog-close",o.value)}},dependencies:[O.sg,x.lW,K.KE,te.Nt,p.ZT,p.uh,p.xY,p.H8,ne.ey,k.XC,k.ZL,S.xw,S.yH,$e.R],encapsulation:2})}return e})();var ri=r(2468),be=r(4692),De=r(9570);function _i(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"mat-list-item")(1,"div",12),t._uU(2),t.qZA(),t.TgZ(3,"button",13),t.NdJ("click",function(){const o=t.CHM(s).$implicit,l=t.oxw();return t.KtG(l.remove(o))})("focus",function(a){return a.stopPropagation()}),t.TgZ(4,"mat-icon"),t._uU(5,"close"),t.qZA()(),t._UZ(6,"mat-divider"),t.qZA()}if(2&e){const s=n.$implicit;t.xp6(2),t.Oqu(s)}}function ci(e,n){1&e&&(t.TgZ(0,"mat-list-item"),t.SDv(1,14),t.qZA())}let gi=(()=>{class e{constructor(s){this.data=s,this.namespaces=[],this.namespaces=Array.from(s.namespaces)}remove(s){this.namespaces.splice(this.namespaces.indexOf(s),1)}static#e=this.\u0275fac=function(i){return new(i||e)(t.Y36(p.WI))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-namespace-settings-edit-dialog"]],decls:14,vars:3,consts:function(){let s,i,a,o,l;return s=" Edit Namespace List ",i="Remove namespaces from the list and confirm to save the changes.",a=" Edit ",o=" Close ",l="No namespaces selected",[["fxFlex","","fxLayout","column"],["mat-dialog-title",""],s,["fxLayout","column",1,"kd-dialog-text"],i,[4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayoutAlign","space-between center",2,"padding","16px 0"],["mat-raised-button","","color","primary",3,"mat-dialog-close"],a,["mat-button","","color","primary",3,"mat-dialog-close"],o,["fxFlex","100"],["mat-icon-button","",3,"click","focus"],l]},template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"h2",1),t.SDv(2,2),t.qZA(),t.TgZ(3,"mat-dialog-content",3)(4,"div"),t.SDv(5,4),t.qZA(),t.TgZ(6,"mat-list"),t.YNc(7,_i,7,1,"mat-list-item",5),t.YNc(8,ci,2,0,"mat-list-item",6),t.qZA()(),t.TgZ(9,"mat-dialog-actions",7)(10,"button",8),t.SDv(11,9),t.qZA(),t.TgZ(12,"button",10),t.SDv(13,11),t.qZA()()()),2&i&&(t.xp6(7),t.Q6J("ngForOf",a.namespaces),t.xp6(1),t.Q6J("ngIf",0===a.namespaces.length),t.xp6(2),t.Q6J("mat-dialog-close",a.namespaces))},dependencies:[O.sg,O.O5,x.lW,ri.d,be.Hw,p.ZT,p.uh,p.xY,p.H8,De.i$,De.Tg,S.xw,S.Wh,S.yH],encapsulation:2})}return e})();var di=r(695),Pe=r(4002);function ui(e,n){if(1&e&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.Q6J("value",s),t.xp6(1),t.hij(" ",s," ")}}function fi(e,n){if(1&e&&(t.TgZ(0,"mat-chip",18),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.Q6J("matTooltip",s)("selectable",!1)("removable",!1),t.xp6(1),t.hij(" ",s," ")}}function mi(e,n){1&e&&(t.TgZ(0,"mat-chip",19),t.SDv(1,20),t.qZA()),2&e&&t.Q6J("disabled",!0)}function pi(e,n){if(1&e&&(t.TgZ(0,"mat-chip",21),t._uU(1),t.qZA()),2&e){const s=t.oxw();t.Q6J("disabled",!0),t.xp6(1),t.hij("+ ",s.invisibleCount,"")}}var Z=function(e){return e[e.XLarge=5]="XLarge",e[e.Large=3]="Large",e[e.Medium=2]="Medium",e}(Z||{}),L=function(e){return e.DefaultNamespace="defaultNamespace",e.FallbackList="fallbackList",e}(L||{});let Si=(()=>{class e{get namespaceFallbackList_(){return this.settings_.namespaceFallbackList?this.settings_.namespaceFallbackList.filter(s=>s):[]}get formArrayNamespaceFallbackList_(){const s=this.form.get(L.FallbackList).value;return s?s.filter(i=>i):[]}constructor(s,i,a,o,l){this.namespaceService_=s,this.settingsHelperService_=i,this.dialog_=a,this.breakpointObserver_=o,this.builder_=l,this.Controls=L,this.namespaces=[],this.visibleNamespaces=0,this.endpoint_=Re.wE.resource(Re._z.namespace).list(),this.visibleNamespacesMap=[[I.u3.XLarge,Z.XLarge],[I.u3.Large,Z.Large],[I.u3.Medium,Z.Medium]],this.destroyRef=(0,t.f3M)(t.ktI)}get invisibleCount(){return this.settings_.namespaceFallbackList?this.settings_.namespaceFallbackList.length-this.visibleNamespaces:0}ngOnInit(){this.settings_=this.settingsHelperService_.settings,this.form=this.builder_.group({[L.DefaultNamespace]:this.builder_.control(""),[L.FallbackList]:this.builder_.array([])}),this.namespaceService_.get(this.endpoint_).pipe((0,ai.U)(s=>s.namespaces.map(i=>i.objectMeta.name))).pipe((0,G.sL)(this.destroyRef)).subscribe(s=>this.namespaces=s),this.breakpointObserver_.observe([I.u3.Medium,I.u3.Large,I.u3.XLarge]).pipe((0,G.sL)(this.destroyRef)).subscribe(s=>{const i=this.visibleNamespacesMap.find(a=>s.breakpoints[a[0]]);this.visibleNamespaces=i?i[1]:Z.Medium}),this.form.valueChanges.pipe((0,G.sL)(this.destroyRef)).subscribe(this.onFormChange_.bind(this)),this.settingsHelperService_.onSettingsChange.pipe((0,G.sL)(this.destroyRef)).subscribe(this.onSettingsChange_.bind(this))}add(){const s={data:{namespaces:this.namespaces.filter(i=>!this.settingsHelperService_.settings.namespaceFallbackList.includes(i))}};this.dialog_.open(li,s).afterClosed().pipe((0,Q.q)(1)).subscribe(i=>this.containsNamespace_(i)?null:this.addNamespace_(i))}edit(){this.dialog_.open(gi,{data:{namespaces:this.namespaceFallbackList_}}).afterClosed().pipe((0,Q.q)(1)).subscribe(i=>{i&&(this.settingsHelperService_.settings={namespaceFallbackList:i})})}writeValue(s){s&&this.form.setValue(s)}registerOnChange(s){this.form.valueChanges.pipe((0,G.sL)(this.destroyRef)).subscribe(s)}registerOnTouched(s){this.form.statusChanges.pipe((0,G.sL)(this.destroyRef)).subscribe(s)}addNamespace_(s){this.form.get(L.FallbackList).push(this.builder_.control(s))}containsNamespace_(s){return!s||this.form.get(L.FallbackList).controls.map(i=>i.value).indexOf(s)>-1}onFormChange_(){this.settingsHelperService_.settings={defaultNamespace:this.form.get(L.DefaultNamespace).value,namespaceFallbackList:this.formArrayNamespaceFallbackList_}}onSettingsChange_(s){this.settings_=s,this.form.get(L.DefaultNamespace).setValue(this.settings_.defaultNamespace,{emitEvent:!1}),this.form.get(L.FallbackList).controls=this.namespaceFallbackList_.map(i=>this.builder_.control("")),this.form.get(L.FallbackList).reset(this.namespaceFallbackList_,{emitEvent:!1})}static#e=this.\u0275fac=function(i){return new(i||e)(t.Y36(Ie.z),t.Y36(V),t.Y36(p.uw),t.Y36(I.Yg),t.Y36(m.QS))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-namespace-settings"]],features:[t._Bn([{provide:m.JU,useExisting:(0,t.Gpc)(()=>e),multi:!0}])],decls:24,vars:14,consts:function(){let s,i,a,o,l,_;return s="Default namespace",i="Namespace that should be selected by default after logging in.",a="Namespace",o="Namespace fallback list",l="List of namespaces that should be presented to user without namespace list privileges.",_="Add namespaces...",[[3,"formGroup"],["key",s,"desc",i],["fxFlex",""],["formControlName","defaultNamespace","name","defaultNamespace","placeholder",a,"type","text","matInput","",3,"matAutocomplete"],["namespaceInput",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["key",o,"desc",l],["fxFlex","100","fxLayout","row"],["fxFlex","80","fxLayoutAlign"," center",1,"kd-namespace-chip-list",3,"formArrayName"],["style","max-width: 100px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; display: block",3,"matTooltip","selectable","removable",4,"ngFor","ngForOf"],[3,"disabled",4,"ngIf"],["fxFlex","","fxLayoutAlign"," center",3,"disabled",4,"ngIf"],["fxFlex","20","fxLayoutAlign","end"],["mat-icon-button","",2,"margin-right","0",3,"click"],[2,"font-size","20px"],["mat-icon-button","",3,"click"],[3,"value"],[2,"max-width","100px","text-overflow","ellipsis","white-space","nowrap","overflow","hidden","display","block",3,"matTooltip","selectable","removable"],[3,"disabled"],_,["fxFlex","","fxLayoutAlign"," center",3,"disabled"]]},template:function(i,a){if(1&i&&(t.TgZ(0,"form",0)(1,"kd-settings-entry",1)(2,"mat-form-field",2),t._UZ(3,"input",3,4),t.TgZ(5,"mat-autocomplete",null,5),t.YNc(7,ui,2,2,"mat-option",6),t.ALo(8,"kdFilterBy"),t.qZA()()(),t.TgZ(9,"kd-settings-entry",7)(10,"mat-form-field",2)(11,"div",8)(12,"mat-chip-list",9),t.YNc(13,fi,2,4,"mat-chip",10),t.ALo(14,"slice"),t.YNc(15,mi,2,1,"mat-chip",11),t.YNc(16,pi,2,2,"mat-chip",12),t.qZA(),t.TgZ(17,"div",13)(18,"button",14),t.NdJ("click",function(){return a.edit()}),t.TgZ(19,"mat-icon",15),t._uU(20,"edit"),t.qZA()(),t.TgZ(21,"button",16),t.NdJ("click",function(){return a.add()}),t.TgZ(22,"mat-icon"),t._uU(23,"add"),t.qZA()()()()()()()),2&i){const o=t.MAs(4),l=t.MAs(6);t.Q6J("formGroup",a.form),t.xp6(3),t.Q6J("matAutocomplete",l),t.xp6(4),t.Q6J("ngForOf",t.xi3(8,7,a.namespaces,o.value)),t.xp6(5),t.Q6J("formArrayName",a.Controls.FallbackList),t.xp6(1),t.Q6J("ngForOf",t.Dn7(14,10,a.form.get(a.Controls.FallbackList).value,0,a.visibleNamespaces)),t.xp6(2),t.Q6J("ngIf",0===a.form.get(a.Controls.FallbackList).value.length),t.xp6(1),t.Q6J("ngIf",a.invisibleCount>0)}},dependencies:[O.sg,O.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.CE,x.lW,K.KE,be.Hw,te.Nt,di.gM,Pe.qn,Pe.HS,ne.ey,k.XC,k.ZL,S.xw,S.Wh,S.yH,se,O.OU,$e.R],styles:["kd-settings-entry[_ngcontent-%COMP%]{min-height:56px}"]})}return e})();var d=function(e){return e.ClusterName="clusterName",e.ItemsPerPage="itemsPerPage",e.LabelsLimit="labelsLimit",e.LogsAutorefreshInterval="logsAutorefreshInterval",e.ResourceAutorefreshInterval="resourceAutorefreshInterval",e.DisableAccessDeniedNotification="disableAccessDeniedNotification",e.NamespaceSettings="namespaceSettings",e.HideAllNamespaces="hideAllNamespaces",e}(d||{});let hi=(()=>{class e{constructor(s,i,a,o,l,_){this.settingsService_=s,this.settingsHelperService_=i,this.namespaceService_=a,this.dialog_=o,this.title_=l,this.builder_=_,this.Controls=d,this.settings={},this.hasLoadError=!1,this.concurrentChangeErr_="settings changed since last reload",this.destroyRef=(0,t.f3M)(t.ktI)}get externalSettings_(){const s={};return s.itemsPerPage=this.settingsService_.getItemsPerPage(),s.labelsLimit=this.settingsService_.getLabelsLimit(),s.clusterName=this.settingsService_.getClusterName(),s.logsAutoRefreshTimeInterval=this.settingsService_.getLogsAutoRefreshTimeInterval(),s.resourceAutoRefreshTimeInterval=this.settingsService_.getResourceAutoRefreshTimeInterval(),s.disableAccessDeniedNotifications=this.settingsService_.getDisableAccessDeniedNotifications(),s.hideAllNamespaces=this.settingsService_.getHideAllNamespaces(),s.defaultNamespace=this.settingsService_.getDefaultNamespace(),s.namespaceFallbackList=this.settingsService_.getNamespaceFallbackList(),s}ngOnInit(){this.form=this.builder_.group({[d.ClusterName]:this.builder_.control(""),[d.ItemsPerPage]:this.builder_.control(0),[d.LabelsLimit]:this.builder_.control(0),[d.LogsAutorefreshInterval]:this.builder_.control(0),[d.ResourceAutorefreshInterval]:this.builder_.control(0),[d.DisableAccessDeniedNotification]:this.builder_.control(!1),[d.HideAllNamespaces]:this.builder_.control(!1),[d.NamespaceSettings]:this.builder_.control("")}),this.load_(),this.form.valueChanges.pipe((0,G.sL)(this.destroyRef)).subscribe(this.onFormChange_.bind(this)),this.settingsHelperService_.onSettingsChange.pipe((0,G.sL)(this.destroyRef)).subscribe(s=>this.settings=s)}isInitialized(){return this.settingsService_.isInitialized()}reload(){this.form.reset(),this.settingsHelperService_.reset(),this.load_()}canSave(){return!Un(this.settings,this.externalSettings_)&&!this.hasLoadError}save(){this.settingsService_.save(this.settings).pipe((0,Kn.b)(s=>{this.load_(),this.title_.update(),this.settingsService_.onSettingsUpdate.next()})).pipe((0,kn.K)(this.onSaveError_.bind(this))).pipe((0,Q.q)(1)).subscribe(this.onSave_.bind(this))}onSave_(s){!0===s&&this.save(),this.reload()}onSaveError_(s){const i=(0,ti.Vf)(s);return-1!==i.message.indexOf(this.concurrentChangeErr_)?this.dialog_.open(jn,{width:"420px"}).afterClosed():(this.reload(),this.dialog_.open(ei.h,{data:{title:"Could not save settings",message:`${i.message}`,confirmLabel:"Close"}}).afterClosed().pipe((0,Wn.w)(a=>(0,Qn.of)(!1))))}load_(){this.settingsService_.canI().pipe((0,Q.q)(1)).subscribe(s=>this.hasLoadError=!s),this.settingsService_.load(this.onLoad_.bind(this),this.onLoadError_.bind(this))}onLoad_(){this.settings=this.externalSettings_,this.settingsHelperService_.settings=this.settings,this.form.get(d.ItemsPerPage).setValue(this.settings.itemsPerPage,{emitEvent:!1}),this.form.get(d.LabelsLimit).setValue(this.settings.labelsLimit,{emitEvent:!1}),this.form.get(d.ClusterName).setValue(this.settings.clusterName,{emitEvent:!1}),this.form.get(d.LogsAutorefreshInterval).setValue(this.settings.logsAutoRefreshTimeInterval,{emitEvent:!1}),this.form.get(d.ResourceAutorefreshInterval).setValue(this.settings.resourceAutoRefreshTimeInterval,{emitEvent:!1}),this.form.get(d.DisableAccessDeniedNotification).setValue(this.settings.disableAccessDeniedNotifications,{emitEvent:!1}),this.form.get(d.HideAllNamespaces).setValue(this.settings.hideAllNamespaces,{emitEvent:!1})}onLoadError_(){this.hasLoadError=!0}onFormChange_(){this.settingsHelperService_.settings={itemsPerPage:this.form.get(d.ItemsPerPage).value,clusterName:this.form.get(d.ClusterName).value,disableAccessDeniedNotifications:this.form.get(d.DisableAccessDeniedNotification).value,hideAllNamespaces:this.form.get(d.HideAllNamespaces).value,labelsLimit:this.form.get(d.LabelsLimit).value,logsAutoRefreshTimeInterval:this.form.get(d.LogsAutorefreshInterval).value,resourceAutoRefreshTimeInterval:this.form.get(d.ResourceAutorefreshInterval).value}}static#e=this.\u0275fac=function(i){return new(i||e)(t.Y36(qn.o),t.Y36(V),t.Y36(Ie.z),t.Y36(p.uw),t.Y36(Vn.y),t.Y36(m.QS))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-global-settings"]],decls:44,vars:16,consts:function(){let s,i,a,o,l,_,c,g,N,h,f,E,T,A,C,v,M,X,y;return s=" Global settings ",i="Global settings are stored in config map, so all of them are applied for every instance of the app.",a="Cluster name",o="Cluster name appears in the browser window title if it is set.",l="Cluster name",_="Items per page",c="Max number of items that can be displayed on every list view.",g="Labels limit",N="Max number of labels that are displayed by default on most views.",h="Logs auto-refresh time interval",f="Number of seconds between every auto-refresh of logs.",E="Resource auto-refresh time interval",T="Number of seconds between every auto-refresh of every resource. Set 0 to disable.",A="Disable access denied notification",C="Hides all access denied warnings in the notification panel.",v="Hide All Namespaces option",M="Hides all-namespaces option from the namespaces dropdown list in UI.",X=" Save ",y=" Reload ",[[3,"initialized","expandable"],["title",""],s,["content",""],i,[3,"formGroup"],["key",a,"desc",o],["fxFlex",""],["name","clusterName","placeholder",l,"type","text","matInput","",3,"formControlName"],[3,"formControlName"],["key",_,"desc",c],["color","primary","min","5","max","50","step","5","fxFlex","",3,"formControlName"],["fxFlexAlign"," center",1,"kd-slider-value","kd-muted"],["key",g,"desc",N],["color","primary","min","1","max","10","step","1","fxFlex","",3,"formControlName"],["key",h,"desc",f],["key",E,"desc",T],["color","primary","min","0","max","60","step","5","fxFlex","",3,"formControlName"],["key",A,"desc",C],["fxFlex","","fxLayoutAlign"," center"],["color","primary","name","disableAccessDeniedNotifications",3,"formControlName"],["key",v,"desc",M],["color","primary","name","hideAllNamespaces",3,"formControlName"],["color","primary","mat-raised-button","",3,"disabled","click"],X,["type","button","color","primary","mat-raised-button","",3,"click"],y]},template:function(i,a){1&i&&(t.TgZ(0,"kd-card",0)(1,"div",1),t.SDv(2,2),t.qZA(),t.TgZ(3,"div",3)(4,"p"),t.SDv(5,4),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"form",5)(8,"kd-settings-entry",6)(9,"mat-form-field",7),t._UZ(10,"input",8),t.qZA()(),t._UZ(11,"kd-namespace-settings",9),t.TgZ(12,"kd-settings-entry",10)(13,"div",7),t._UZ(14,"mat-slider",11),t.TgZ(15,"div",12),t._uU(16),t.qZA()()(),t.TgZ(17,"kd-settings-entry",13)(18,"div",7),t._UZ(19,"mat-slider",14),t.TgZ(20,"div",12),t._uU(21),t.qZA()()(),t.TgZ(22,"kd-settings-entry",15)(23,"div",7),t._UZ(24,"mat-slider",14),t.TgZ(25,"span",12),t._uU(26),t.qZA()()(),t.TgZ(27,"kd-settings-entry",16)(28,"div",7),t._UZ(29,"mat-slider",17),t.TgZ(30,"span",12),t._uU(31),t.qZA()()(),t.TgZ(32,"kd-settings-entry",18)(33,"div",19),t._UZ(34,"mat-slide-toggle",20),t.qZA()(),t.TgZ(35,"kd-settings-entry",21)(36,"div",19),t._UZ(37,"mat-slide-toggle",22),t.qZA()(),t._UZ(38,"br")(39,"br"),t.TgZ(40,"button",23),t.NdJ("click",function(){return a.save()}),t.SDv(41,24),t.qZA(),t.TgZ(42,"button",25),t.NdJ("click",function(){return a.reload()}),t.SDv(43,26),t.qZA()()()()),2&i&&(t.Q6J("initialized",a.isInitialized())("expandable",!0),t.xp6(7),t.Q6J("formGroup",a.form),t.xp6(3),t.Q6J("formControlName",a.Controls.ClusterName),t.xp6(1),t.Q6J("formControlName",a.Controls.NamespaceSettings),t.xp6(3),t.Q6J("formControlName",a.Controls.ItemsPerPage),t.xp6(2),t.hij(" ",a.settings.itemsPerPage," "),t.xp6(3),t.Q6J("formControlName",a.Controls.LabelsLimit),t.xp6(2),t.hij(" ",a.settings.labelsLimit," "),t.xp6(3),t.Q6J("formControlName",a.Controls.LogsAutorefreshInterval),t.xp6(2),t.hij(" ",a.settings.logsAutoRefreshTimeInterval," "),t.xp6(3),t.Q6J("formControlName",a.Controls.ResourceAutorefreshInterval),t.xp6(2),t.hij(" ",a.settings.resourceAutoRefreshTimeInterval," "),t.xp6(3),t.Q6J("formControlName",a.Controls.DisableAccessDeniedNotification),t.xp6(3),t.Q6J("formControlName",a.Controls.HideAllNamespaces),t.xp6(3),t.Q6J("disabled",!a.canSave()))},dependencies:[m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,x.lW,K.KE,te.Nt,si.pH,ni.Rr,S.Wh,S.XD,S.yH,ye.A,se,Si],styles:["kd-settings-entry[_ngcontent-%COMP%]{min-height:56px}"]})}return e})();var xe=r(6611),Ze=r(355),Ti=r(553),Ai=r(5358),Ni=r(4324),Ei=r(459);function Li(e,n){if(1&e&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.Q6J("value",s.name),t.xp6(1),t.hij(" ",s.displayName," ")}}function Ci(e,n){if(1&e&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&e){const s=n.$implicit;t.Q6J("value",s.value),t.xp6(1),t.hij(" ",s.label," ")}}function vi(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"kd-settings-entry",11)(1,"mat-form-field",6)(2,"mat-select",12),t.NdJ("ngModelChange",function(a){t.CHM(s);const o=t.oxw();return t.KtG(o.onLanguageSelected(a))})("ngModelChange",function(a){t.CHM(s);const o=t.oxw();return t.KtG(o.selectedLanguage=a)}),t.YNc(3,Ci,2,2,"mat-option",9),t.qZA()()()}if(2&e){const s=t.oxw();t.xp6(2),t.Q6J("ngModel",s.selectedLanguage),t.xp6(1),t.Q6J("ngForOf",s.languages)}}let Mi=(()=>{class e{constructor(s,i,a,o,l){this.settings_=s,this.theme_=i,this.cookies_=a,this.document_=o,this.appConfig_=l,this.settings={},this.languages=[]}ngOnInit(){this.settings=this.settings_.get(),this.languages=this.appConfig_.supportedLanguages,this.selectedLanguage=this.cookies_.get(this.appConfig_.languageCookieName)||this.appConfig_.defaultLanguage,this.themes=this.theme_.themes,this.selectedTheme=this.theme_.theme,this.systemTheme=Ze.f.SystemTheme}onThemeChange(){this.settings.theme=this.selectedTheme,this.settings_.handleThemeChange(this.settings.theme)}onLanguageSelected(s){this.cookies_.set(this.appConfig_.languageCookieName,s),this.document_.location.reload()}isProdMode(){return Ti.N.production}static#e=this.\u0275fac=function(i){return new(i||e)(t.Y36(Ni.G),t.Y36(Ze.f),t.Y36(Ei.N),t.Y36(O.K0),t.Y36(Ai.ED))};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-local-settings"]],viewQuery:function(i,a){if(1&i&&t.Gf(xe.gD,7),2&i){let o;t.iGM(o=t.CRH())&&(a.select_=o.first)}},decls:14,vars:5,consts:function(){let s,i,a,o,l,_;return s=" Local settings ",i=" Local settings are stored in the browser cookies, so they are not synchronized between multiple devices. Changes are applied automatically on every change. ",a="Theme",o="Choose color theme of the dashboard",l="Language",_="Change the language of the dashboard",[[3,"expandable"],["title",""],s,["content",""],i,["key",a,"desc",o],["fxFlex",""],["fxFlex","",3,"value","valueChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["key",l,"desc",_,4,"ngIf"],["key",l,"desc",_],[3,"ngModel","ngModelChange"]]},template:function(i,a){1&i&&(t.TgZ(0,"kd-card",0)(1,"div",1),t.SDv(2,2),t.qZA(),t.TgZ(3,"div",3)(4,"p"),t.SDv(5,4),t.qZA(),t._UZ(6,"br"),t.TgZ(7,"kd-settings-entry",5)(8,"mat-form-field",6)(9,"mat-select",7),t.NdJ("valueChange",function(l){return a.selectedTheme=l})("valueChange",function(){return a.onThemeChange()}),t.TgZ(10,"mat-option",8),t._uU(11,"System"),t.qZA(),t.YNc(12,Li,2,2,"mat-option",9),t.qZA()()(),t.YNc(13,vi,4,2,"kd-settings-entry",10),t.qZA()()),2&i&&(t.Q6J("expandable",!0),t.xp6(9),t.Q6J("value",a.selectedTheme),t.xp6(1),t.Q6J("value",a.systemTheme),t.xp6(2),t.Q6J("ngForOf",a.themes),t.xp6(1),t.Q6J("ngIf",a.isProdMode()))},dependencies:[O.sg,O.O5,m.JJ,m.On,K.KE,xe.gD,ne.ey,S.yH,ye.A,se],styles:[".mat-button-toggle-group[_ngcontent-%COMP%]{border:0}.mat-button-toggle-group[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]{border-radius:4px;margin-right:8px}"]})}return e})();const Oi={path:"",component:(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275cmp=t.Xpm({type:e,selectors:[["kd-settings"]],decls:2,vars:0,template:function(i,a){1&i&&t._UZ(0,"kd-global-settings")(1,"kd-local-settings")},dependencies:[hi,Mi],encapsulation:2})}return e})(),data:{breadcrumb:Zt.SX.Settings}};let Gi=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[ue.Bz.forChild([Oi]),ue.Bz]})}return e})(),Ii=(()=>{class e{static#e=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({providers:[V],imports:[Fe.m,Xe.K,Gi]})}return e})()}}]);